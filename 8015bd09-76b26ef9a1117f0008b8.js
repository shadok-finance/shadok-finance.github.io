"use strict";(self.webpackChunkgulp_website=self.webpackChunkgulp_website||[]).push([[766],{5940:function(e,t,r){r.r(t),r.d(t,{Account:function(){return lr},Authorized:function(){return Ai},BLOCKHASH_CACHE_TIMEOUT_MS:function(){return en},BPF_LOADER_DEPRECATED_PROGRAM_ID:function(){return pr},BPF_LOADER_PROGRAM_ID:function(){return qr},BpfLoader:function(){return Mr},Connection:function(){return wi},Ed25519Program:function(){return _i},Enum:function(){return rr},EpochSchedule:function(){return Hr},FeeCalculatorLayout:function(){return Br},Keypair:function(){return Si},LAMPORTS_PER_SOL:function(){return Fi},Loader:function(){return Dr},Lockup:function(){return Ei},MAX_SEED_LENGTH:function(){return ir},Message:function(){return yr},NONCE_ACCOUNT_LENGTH:function(){return Zr},NonceAccount:function(){return Nr},PACKET_DATA_SIZE:function(){return vr},PublicKey:function(){return sr},SOLANA_SCHEMA:function(){return nr},STAKE_CONFIG_ID:function(){return Ii},STAKE_INSTRUCTION_LAYOUTS:function(){return Ri},SYSTEM_INSTRUCTION_LAYOUTS:function(){return Lr},SYSVAR_CLOCK_PUBKEY:function(){return xr},SYSVAR_INSTRUCTIONS_PUBKEY:function(){return Pr},SYSVAR_RECENT_BLOCKHASHES_PUBKEY:function(){return _r},SYSVAR_RENT_PUBKEY:function(){return Ir},SYSVAR_REWARDS_PUBKEY:function(){return Ar},SYSVAR_STAKE_HISTORY_PUBKEY:function(){return Er},Secp256k1Program:function(){return Ui},SendTransactionError:function(){return Vr},StakeAuthorizationLayout:function(){return Ti},StakeInstruction:function(){return Pi},StakeProgram:function(){return Oi},Struct:function(){return tr},SystemInstruction:function(){return zr},SystemProgram:function(){return Kr},Transaction:function(){return Sr},TransactionInstruction:function(){return wr},VALIDATOR_INFO_KEY:function(){return Zi},VOTE_PROGRAM_ID:function(){return Li},ValidatorInfo:function(){return zi},VoteAccount:function(){return ji},clusterApiUrl:function(){return Gi},sendAndConfirmRawTransaction:function(){return Di},sendAndConfirmTransaction:function(){return Rr}});var n=r(2407),i=r(9439),s=r(4942),o=r(3433),a=r(5861),u=r(136),c=r(2963),h=r(1120),l=r(5671),p=r(3144),f=r(7757),d=r.n(f),g=(r(5743),r(8373)),b=r.n(g),y=r(5010),k=r(4409),m=r.n(k),v=r(4922),w=r.n(v),S=r(8327),x=r(139),_=r(9632),I=r(9117),A=r(2084),E=r.n(A),P=r(9500),R=r.n(P),T=r(9065),O=r.n(T);function C(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw s}}}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.Z)(e);if(t){var i=(0,h.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var N=function(e){return y.lW.isBuffer(e)?e:e instanceof Uint8Array?y.lW.from(e.buffer,e.byteOffset,e.byteLength):y.lW.from(e)},z="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function L(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var K={},j={},D=q;function q(e,t){if(!e)throw new Error(t||"Assertion failed")}q.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var M={exports:{}};"function"==typeof Object.create?M.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:M.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e};var G=D,F=M.exports;function X(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function H(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function V(e){return 1===e.length?"0"+e:e}function Y(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}j.inherits=F,j.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(var n=0,i=0;i<e.length;i++){var s=e.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=63&s|128):X(e,i)?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=63&s|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=63&s|128)}else for(i=0;i<e.length;i++)r[i]=0|e[i];return r},j.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=V(e[r].toString(16));return t},j.htonl=H,j.toHex32=function(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];"little"===t&&(i=H(i)),r+=Y(i.toString(16))}return r},j.zero2=V,j.zero8=Y,j.join32=function(e,t,r,n){var i=r-t;G(i%4==0);for(var s=new Array(i/4),o=0,a=t;o<s.length;o++,a+=4){var u;u="big"===n?e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3]:e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a],s[o]=u>>>0}return s},j.split32=function(e,t){for(var r=new Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var s=e[n];"big"===t?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=255&s):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=255&s)}return r},j.rotr32=function(e,t){return e>>>t|e<<32-t},j.rotl32=function(e,t){return e<<t|e>>>32-t},j.sum32=function(e,t){return e+t>>>0},j.sum32_3=function(e,t,r){return e+t+r>>>0},j.sum32_4=function(e,t,r,n){return e+t+r+n>>>0},j.sum32_5=function(e,t,r,n,i){return e+t+r+n+i>>>0},j.sum64=function(e,t,r,n){var i=e[t],s=n+e[t+1]>>>0,o=(s<n?1:0)+r+i;e[t]=o>>>0,e[t+1]=s},j.sum64_hi=function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},j.sum64_lo=function(e,t,r,n){return t+n>>>0},j.sum64_4_hi=function(e,t,r,n,i,s,o,a){var u=0,c=t;return u+=(c=c+n>>>0)<t?1:0,u+=(c=c+s>>>0)<s?1:0,e+r+i+o+(u+=(c=c+a>>>0)<a?1:0)>>>0},j.sum64_4_lo=function(e,t,r,n,i,s,o,a){return t+n+s+a>>>0},j.sum64_5_hi=function(e,t,r,n,i,s,o,a,u,c){var h=0,l=t;return h+=(l=l+n>>>0)<t?1:0,h+=(l=l+s>>>0)<s?1:0,h+=(l=l+a>>>0)<a?1:0,e+r+i+o+u+(h+=(l=l+c>>>0)<c?1:0)>>>0},j.sum64_5_lo=function(e,t,r,n,i,s,o,a,u,c){return t+n+s+a+c>>>0},j.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},j.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},j.shr64_hi=function(e,t,r){return e>>>r},j.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0};var J={},Q=j,$=D;function ee(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}J.BlockHash=ee,ee.prototype.update=function(e,t){if(e=Q.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=Q.join32(e,0,e.length-r,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this},ee.prototype.digest=function(e){return this.update(this._pad()),$(null===this.pending),this._digest(e)},ee.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else for(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,s=8;s<this.padLength;s++)n[i++]=0;return n};var te={},re={},ne=j.rotr32;function ie(e,t,r){return e&t^~e&r}function se(e,t,r){return e&t^e&r^t&r}function oe(e,t,r){return e^t^r}re.ft_1=function(e,t,r,n){return 0===e?ie(t,r,n):1===e||3===e?oe(t,r,n):2===e?se(t,r,n):void 0},re.ch32=ie,re.maj32=se,re.p32=oe,re.s0_256=function(e){return ne(e,2)^ne(e,13)^ne(e,22)},re.s1_256=function(e){return ne(e,6)^ne(e,11)^ne(e,25)},re.g0_256=function(e){return ne(e,7)^ne(e,18)^e>>>3},re.g1_256=function(e){return ne(e,17)^ne(e,19)^e>>>10};var ae=j,ue=J,ce=re,he=ae.rotl32,le=ae.sum32,pe=ae.sum32_5,fe=ce.ft_1,de=ue.BlockHash,ge=[1518500249,1859775393,2400959708,3395469782];function be(){if(!(this instanceof be))return new be;de.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}ae.inherits(be,de);var ye=be;be.blockSize=512,be.outSize=160,be.hmacStrength=80,be.padLength=64,be.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=he(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],u=this.h[4];for(n=0;n<r.length;n++){var c=~~(n/20),h=pe(he(i,5),fe(c,s,o,a),u,r[n],ge[c]);u=a,a=o,o=he(s,30),s=i,i=h}this.h[0]=le(this.h[0],i),this.h[1]=le(this.h[1],s),this.h[2]=le(this.h[2],o),this.h[3]=le(this.h[3],a),this.h[4]=le(this.h[4],u)},be.prototype._digest=function(e){return"hex"===e?ae.toHex32(this.h,"big"):ae.split32(this.h,"big")};var ke=j,me=J,ve=re,we=D,Se=ke.sum32,xe=ke.sum32_4,_e=ke.sum32_5,Ie=ve.ch32,Ae=ve.maj32,Ee=ve.s0_256,Pe=ve.s1_256,Re=ve.g0_256,Te=ve.g1_256,Oe=me.BlockHash,Ce=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function We(){if(!(this instanceof We))return new We;Oe.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=Ce,this.W=new Array(64)}ke.inherits(We,Oe);var Be=We;We.blockSize=512,We.outSize=256,We.hmacStrength=192,We.padLength=64,We.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=xe(Te(r[n-2]),r[n-7],Re(r[n-15]),r[n-16]);var i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],u=this.h[4],c=this.h[5],h=this.h[6],l=this.h[7];for(we(this.k.length===r.length),n=0;n<r.length;n++){var p=_e(l,Pe(u),Ie(u,c,h),this.k[n],r[n]),f=Se(Ee(i),Ae(i,s,o));l=h,h=c,c=u,u=Se(a,p),a=o,o=s,s=i,i=Se(p,f)}this.h[0]=Se(this.h[0],i),this.h[1]=Se(this.h[1],s),this.h[2]=Se(this.h[2],o),this.h[3]=Se(this.h[3],a),this.h[4]=Se(this.h[4],u),this.h[5]=Se(this.h[5],c),this.h[6]=Se(this.h[6],h),this.h[7]=Se(this.h[7],l)},We.prototype._digest=function(e){return"hex"===e?ke.toHex32(this.h,"big"):ke.split32(this.h,"big")};var Ue=j,Ze=Be;function Ne(){if(!(this instanceof Ne))return new Ne;Ze.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Ue.inherits(Ne,Ze);var ze=Ne;Ne.blockSize=512,Ne.outSize=224,Ne.hmacStrength=192,Ne.padLength=64,Ne.prototype._digest=function(e){return"hex"===e?Ue.toHex32(this.h.slice(0,7),"big"):Ue.split32(this.h.slice(0,7),"big")};var Le=j,Ke=J,je=D,De=Le.rotr64_hi,qe=Le.rotr64_lo,Me=Le.shr64_hi,Ge=Le.shr64_lo,Fe=Le.sum64,Xe=Le.sum64_hi,He=Le.sum64_lo,Ve=Le.sum64_4_hi,Ye=Le.sum64_4_lo,Je=Le.sum64_5_hi,Qe=Le.sum64_5_lo,$e=Ke.BlockHash,et=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function tt(){if(!(this instanceof tt))return new tt;$e.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=et,this.W=new Array(160)}Le.inherits(tt,$e);var rt=tt;function nt(e,t,r,n,i){var s=e&r^~e&i;return s<0&&(s+=4294967296),s}function it(e,t,r,n,i,s){var o=t&n^~t&s;return o<0&&(o+=4294967296),o}function st(e,t,r,n,i){var s=e&r^e&i^r&i;return s<0&&(s+=4294967296),s}function ot(e,t,r,n,i,s){var o=t&n^t&s^n&s;return o<0&&(o+=4294967296),o}function at(e,t){var r=De(e,t,28)^De(t,e,2)^De(t,e,7);return r<0&&(r+=4294967296),r}function ut(e,t){var r=qe(e,t,28)^qe(t,e,2)^qe(t,e,7);return r<0&&(r+=4294967296),r}function ct(e,t){var r=De(e,t,14)^De(e,t,18)^De(t,e,9);return r<0&&(r+=4294967296),r}function ht(e,t){var r=qe(e,t,14)^qe(e,t,18)^qe(t,e,9);return r<0&&(r+=4294967296),r}function lt(e,t){var r=De(e,t,1)^De(e,t,8)^Me(e,t,7);return r<0&&(r+=4294967296),r}function pt(e,t){var r=qe(e,t,1)^qe(e,t,8)^Ge(e,t,7);return r<0&&(r+=4294967296),r}function ft(e,t){var r=De(e,t,19)^De(t,e,29)^Me(e,t,6);return r<0&&(r+=4294967296),r}function dt(e,t){var r=qe(e,t,19)^qe(t,e,29)^Ge(e,t,6);return r<0&&(r+=4294967296),r}tt.blockSize=1024,tt.outSize=512,tt.hmacStrength=192,tt.padLength=128,tt.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=ft(r[n-4],r[n-3]),s=dt(r[n-4],r[n-3]),o=r[n-14],a=r[n-13],u=lt(r[n-30],r[n-29]),c=pt(r[n-30],r[n-29]),h=r[n-32],l=r[n-31];r[n]=Ve(i,s,o,a,u,c,h,l),r[n+1]=Ye(i,s,o,a,u,c,h,l)}},tt.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],u=this.h[5],c=this.h[6],h=this.h[7],l=this.h[8],p=this.h[9],f=this.h[10],d=this.h[11],g=this.h[12],b=this.h[13],y=this.h[14],k=this.h[15];je(this.k.length===r.length);for(var m=0;m<r.length;m+=2){var v=y,w=k,S=ct(l,p),x=ht(l,p),_=nt(l,p,f,d,g),I=it(l,p,f,d,g,b),A=this.k[m],E=this.k[m+1],P=r[m],R=r[m+1],T=Je(v,w,S,x,_,I,A,E,P,R),O=Qe(v,w,S,x,_,I,A,E,P,R);v=at(n,i),w=ut(n,i),S=st(n,i,s,o,a),x=ot(n,i,s,o,a,u);var C=Xe(v,w,S,x),W=He(v,w,S,x);y=g,k=b,g=f,b=d,f=l,d=p,l=Xe(c,h,T,O),p=He(h,h,T,O),c=a,h=u,a=s,u=o,s=n,o=i,n=Xe(T,O,C,W),i=He(T,O,C,W)}Fe(this.h,0,n,i),Fe(this.h,2,s,o),Fe(this.h,4,a,u),Fe(this.h,6,c,h),Fe(this.h,8,l,p),Fe(this.h,10,f,d),Fe(this.h,12,g,b),Fe(this.h,14,y,k)},tt.prototype._digest=function(e){return"hex"===e?Le.toHex32(this.h,"big"):Le.split32(this.h,"big")};var gt=j,bt=rt;function yt(){if(!(this instanceof yt))return new yt;bt.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}gt.inherits(yt,bt);var kt=yt;yt.blockSize=1024,yt.outSize=384,yt.hmacStrength=192,yt.padLength=128,yt.prototype._digest=function(e){return"hex"===e?gt.toHex32(this.h.slice(0,12),"big"):gt.split32(this.h.slice(0,12),"big")},te.sha1=ye,te.sha224=ze,te.sha256=Be,te.sha384=kt,te.sha512=rt;var mt={},vt=j,wt=J,St=vt.rotl32,xt=vt.sum32,_t=vt.sum32_3,It=vt.sum32_4,At=wt.BlockHash;function Et(){if(!(this instanceof Et))return new Et;At.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function Pt(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function Rt(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function Tt(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}vt.inherits(Et,At),mt.ripemd160=Et,Et.blockSize=512,Et.outSize=160,Et.hmacStrength=192,Et.padLength=64,Et.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],i=this.h[2],s=this.h[3],o=this.h[4],a=r,u=n,c=i,h=s,l=o,p=0;p<80;p++){var f=xt(St(It(r,Pt(p,n,i,s),e[Ot[p]+t],Rt(p)),Wt[p]),o);r=o,o=s,s=St(i,10),i=n,n=f,f=xt(St(It(a,Pt(79-p,u,c,h),e[Ct[p]+t],Tt(p)),Bt[p]),l),a=l,l=h,h=St(c,10),c=u,u=f}f=_t(this.h[1],i,h),this.h[1]=_t(this.h[2],s,l),this.h[2]=_t(this.h[3],o,a),this.h[3]=_t(this.h[4],r,u),this.h[4]=_t(this.h[0],n,c),this.h[0]=f},Et.prototype._digest=function(e){return"hex"===e?vt.toHex32(this.h,"little"):vt.split32(this.h,"little")};var Ot=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Ct=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Wt=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Bt=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Ut=j,Zt=D;function Nt(e,t,r){if(!(this instanceof Nt))return new Nt(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(Ut.toArray(t,r))}var zt=Nt;Nt.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),Zt(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},Nt.prototype.update=function(e,t){return this.inner.update(e,t),this},Nt.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},function(e){var t=e;t.utils=j,t.common=J,t.sha=te,t.ripemd=mt,t.hmac=zt,t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160}(K);var Lt=K,Kt=!1,jt=!1,Dt={debug:1,default:2,info:2,warning:3,error:4,off:5},qt=Dt.default,Mt=null;var Gt,Ft,Xt=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Gt||(Gt={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED"}(Ft||(Ft={}));var Ht="0123456789abcdef",Vt=function(){function e(t){(0,l.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,p.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==Dt[r]&&this.throwArgumentError("invalid log level name","logLevel",e),qt>Dt[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(jt)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",s=0;s<t.length;s++)r+=Ht[t[s]>>4],r+=Ht[15&t[s]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(o){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var s=t;i.length&&(t+=" ("+i.join(", ")+")");var o=new Error(t);return o.reason=s,o.code=r,Object.keys(n).forEach((function(e){o[e]=n[e]})),o}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){Xt&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Xt})}},{key:"checkSafeUint53",value:function(t,r){"number"==typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return Mt||(Mt=new e("logger/5.5.0")),Mt}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Kt){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}jt=!!t,Kt=!!r}},{key:"setLogLevel",value:function(t){var r=Dt[t.toLowerCase()];null!=r?qt=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();Vt.errors=Ft,Vt.levels=Gt;var Yt=new Vt("bytes/5.5.0");function Jt(e){return e.slice||(e.slice=function(){var t=Array.prototype.slice.call(arguments);return Jt(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function Qt(e){return"number"==typeof e&&e==e&&e%1==0}function $t(e,t){if(t||(t={}),"number"==typeof e){Yt.checkSafeUint53(e,"invalid arrayify value");for(var r=[];e;)r.unshift(255&e),e=parseInt(String(e/256));return 0===r.length&&r.push(0),Jt(new Uint8Array(r))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),function(e){return!!e.toHexString}(e)&&(e=e.toHexString()),function(e,t){if("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))return!1;if(t&&e.length!==2+2*t)return!1;return!0}(e)){var n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0x0"+n.substring(2):"right"===t.hexPad?n+="0":Yt.throwArgumentError("hex data is odd-length","value",e));for(var i=[],s=0;s<n.length;s+=2)i.push(parseInt(n.substring(s,s+2),16));return Jt(new Uint8Array(i))}return function(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!Qt(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!Qt(r)||r<0||r>=256)return!1}return!0}(e)?Jt(new Uint8Array(e)):Yt.throwArgumentError("invalid arrayify value","value",e)}function er(e){return"0x"+Lt.sha256().update($t(e)).digest("hex")}new Vt("sha2/5.5.0");var tr=function(){function e(t){(0,l.Z)(this,e),Object.assign(this,t)}return(0,p.Z)(e,[{key:"encode",value:function(){return y.lW.from((0,S.serialize)(nr,this))}}],[{key:"decode",value:function(e){return(0,S.deserialize)(nr,this,e)}},{key:"decodeUnchecked",value:function(e){return(0,S.deserializeUnchecked)(nr,this,e)}}]),e}(),rr=function(e){(0,u.Z)(r,e);var t=Z(r);function r(e){var n;if((0,l.Z)(this,r),(n=t.call(this,e)).enum="",1!==Object.keys(e).length)throw new Error("Enum can only take single value");return Object.keys(e).map((function(e){n.enum=e})),n}return r}(tr),nr=new Map,ir=32;var sr=function(e){(0,u.Z)(s,e);var t,r,n,i=Z(s);function s(e){var t;if((0,l.Z)(this,s),(t=i.call(this,{}))._bn=void 0,function(e){return void 0!==e._bn}(e))t._bn=e._bn;else{if("string"==typeof e){var r=w().decode(e);if(32!=r.length)throw new Error("Invalid public key input");t._bn=new(m())(r)}else t._bn=new(m())(e);if(t._bn.byteLength()>32)throw new Error("Invalid public key input")}return t}return(0,p.Z)(s,[{key:"equals",value:function(e){return this._bn.eq(e._bn)}},{key:"toBase58",value:function(){return w().encode(this.toBytes())}},{key:"toBytes",value:function(){return this.toBuffer()}},{key:"toBuffer",value:function(){var e=this._bn.toArrayLike(y.lW);if(32===e.length)return e;var t=y.lW.alloc(32);return e.copy(t,32-e.length),t}},{key:"toString",value:function(){return this.toBase58()}}],[{key:"createWithSeed",value:(n=(0,a.Z)(d().mark((function e(t,r,n){var i,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=y.lW.concat([t.toBuffer(),y.lW.from(r),n.toBuffer()]),o=er(new Uint8Array(i)).slice(2),e.abrupt("return",new s(y.lW.from(o,"hex")));case 3:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"createProgramAddress",value:(r=(0,a.Z)(d().mark((function e(t,r){var n,i,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=y.lW.alloc(0),t.forEach((function(e){if(e.length>ir)throw new TypeError("Max seed length exceeded");n=y.lW.concat([n,N(e)])})),n=y.lW.concat([n,r.toBuffer(),y.lW.from("ProgramDerivedAddress")]),i=er(new Uint8Array(n)).slice(2),!ar(o=new(m())(i,16).toArray(void 0,32))){e.next=7;break}throw new Error("Invalid seeds, address must fall off the curve");case 7:return e.abrupt("return",new s(o));case 8:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})},{key:"findProgramAddress",value:(t=(0,a.Z)(d().mark((function e(t,r){var n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=255;case 1:if(0==n){e.next=18;break}return e.prev=2,s=t.concat(y.lW.from([n])),e.next=6,this.createProgramAddress(s,r);case 6:i=e.sent,e.next=15;break;case 9:if(e.prev=9,e.t0=e.catch(2),!(e.t0 instanceof TypeError)){e.next=13;break}throw e.t0;case 13:return n--,e.abrupt("continue",1);case 15:return e.abrupt("return",[i,n]);case 18:throw new Error("Unable to find a viable program address nonce");case 19:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e,r){return t.apply(this,arguments)})},{key:"isOnCurve",value:function(e){return 1==ar(e)}}]),s}(tr);sr.default=new sr("11111111111111111111111111111111"),nr.set(sr,{kind:"struct",fields:[["_bn","u256"]]});var or=b().lowlevel;function ar(e){var t=[or.gf(),or.gf(),or.gf(),or.gf()],r=or.gf(),n=or.gf(),i=or.gf(),s=or.gf(),o=or.gf(),a=or.gf(),u=or.gf();return or.set25519(t[2],ur),or.unpack25519(t[1],e),or.S(i,t[1]),or.M(s,i,or.D),or.Z(i,i,t[2]),or.A(s,t[2],s),or.S(o,s),or.S(a,o),or.M(u,a,o),or.M(r,u,i),or.M(r,r,s),or.pow2523(r,r),or.M(r,r,i),or.M(r,r,s),or.M(r,r,s),or.M(t[0],r,s),or.S(n,t[0]),or.M(n,n,s),hr(n,i)&&or.M(t[0],t[0],cr),or.S(n,t[0]),or.M(n,n,s),hr(n,i)?0:1}var ur=or.gf([1]),cr=or.gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function hr(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return or.pack25519(r,e),or.pack25519(n,t),or.crypto_verify_32(r,0,n,0)}var lr=function(){function e(t){(0,l.Z)(this,e),this._keypair=void 0,this._keypair=t?b().sign.keyPair.fromSecretKey(N(t)):b().sign.keyPair()}return(0,p.Z)(e,[{key:"publicKey",get:function(){return new sr(this._keypair.publicKey)}},{key:"secretKey",get:function(){return N(this._keypair.secretKey)}}]),e}(),pr=new sr("BPFLoader1111111111111111111111111111111111"),fr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey";return x.blob(32,e)},dr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"string",t=x.struct([x.u32("length"),x.u32("lengthPadding"),x.blob(x.offset(x.u32(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t);return t.decode=function(e,t){return r(e,t).chars.toString("utf8")},t.encode=function(e,t,r){var i={chars:y.lW.from(e,"utf8")};return n(i,t,r)},t.alloc=function(e){return x.u32().span+x.u32().span+y.lW.from(e,"utf8").length},t};function gr(e){for(var t=0,r=0;;){var n=e.shift();if(t|=(127&n)<<7*r,r+=1,0==(128&n))break}return t}function br(e,t){for(var r=t;;){var n=127&r;if(0==(r>>=7)){e.push(n);break}n|=128,e.push(n)}}var yr=function(){function e(t){var r=this;(0,l.Z)(this,e),this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map((function(e){return new sr(e)})),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach((function(e){return r.indexToProgramIds.set(e.programIdIndex,r.accountKeys[e.programIdIndex])}))}return(0,p.Z)(e,[{key:"isAccountSigner",value:function(e){return e<this.header.numRequiredSignatures}},{key:"isAccountWritable",value:function(e){return e<this.header.numRequiredSignatures-this.header.numReadonlySignedAccounts||e>=this.header.numRequiredSignatures&&e<this.accountKeys.length-this.header.numReadonlyUnsignedAccounts}},{key:"isProgramId",value:function(e){return this.indexToProgramIds.has(e)}},{key:"programIds",value:function(){return(0,o.Z)(this.indexToProgramIds.values())}},{key:"nonProgramIds",value:function(){var e=this;return this.accountKeys.filter((function(t,r){return!e.isProgramId(r)}))}},{key:"serialize",value:function(){var e=this.accountKeys.length,t=[];br(t,e);var r=this.instructions.map((function(e){var t=e.accounts,r=e.programIdIndex,n=w().decode(e.data),i=[];br(i,t.length);var s=[];return br(s,n.length),{programIdIndex:r,keyIndicesCount:y.lW.from(i),keyIndices:y.lW.from(t),dataLength:y.lW.from(s),data:n}})),n=[];br(n,r.length);var i=y.lW.alloc(vr);y.lW.from(n).copy(i);var s=n.length;r.forEach((function(e){var t=x.struct([x.u8("programIdIndex"),x.blob(e.keyIndicesCount.length,"keyIndicesCount"),x.seq(x.u8("keyIndex"),e.keyIndices.length,"keyIndices"),x.blob(e.dataLength.length,"dataLength"),x.seq(x.u8("userdatum"),e.data.length,"data")]).encode(e,i,s);s+=t})),i=i.slice(0,s);var o=x.struct([x.blob(1,"numRequiredSignatures"),x.blob(1,"numReadonlySignedAccounts"),x.blob(1,"numReadonlyUnsignedAccounts"),x.blob(t.length,"keyCount"),x.seq(fr("key"),e,"keys"),fr("recentBlockhash")]),a={numRequiredSignatures:y.lW.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:y.lW.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:y.lW.from([this.header.numReadonlyUnsignedAccounts]),keyCount:y.lW.from(t),keys:this.accountKeys.map((function(e){return N(e.toBytes())})),recentBlockhash:w().decode(this.recentBlockhash)},u=y.lW.alloc(2048),c=o.encode(a,u);return i.copy(u,c),u.slice(0,c+i.length)}}],[{key:"from",value:function(t){for(var r=(0,o.Z)(t),n=r.shift(),i=r.shift(),s=r.shift(),a=gr(r),u=[],c=0;c<a;c++){var h=r.slice(0,32);r=r.slice(32),u.push(w().encode(y.lW.from(h)))}for(var l=r.slice(0,32),p=gr(r=r.slice(32)),f=[],d=0;d<p;d++){var g=r.shift(),b=gr(r),k=r.slice(0,b),m=gr(r=r.slice(b)),v=r.slice(0,m),S=w().encode(y.lW.from(v));r=r.slice(m),f.push({programIdIndex:g,accounts:k,data:S})}return new e({header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:w().encode(y.lW.from(l)),accountKeys:u,instructions:f})}}]),e}();function kr(e,t){if(!e)throw new Error(t||"Assertion failed")}var mr=y.lW.alloc(64).fill(0),vr=1232,wr=function e(t){(0,l.Z)(this,e),this.keys=void 0,this.programId=void 0,this.data=y.lW.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)},Sr=function(){function e(t){(0,l.Z)(this,e),this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.nonceInfo=void 0,t&&Object.assign(this,t)}return(0,p.Z)(e,[{key:"signature",get:function(){return this.signatures.length>0?this.signatures[0].signature:null}},{key:"add",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(0===r.length)throw new Error("No instructions");return r.forEach((function(t){"instructions"in t?e.instructions=e.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?e.instructions.push(t):e.instructions.push(new wr(t))})),this}},{key:"compileMessage",value:function(){var e=this.nonceInfo;e&&this.instructions[0]!=e.nonceInstruction&&(this.recentBlockhash=e.nonce,this.instructions.unshift(e.nonceInstruction));var t,r=this.recentBlockhash;if(!r)throw new Error("Transaction recentBlockhash required");if(this.instructions.length<1&&console.warn("No instructions provided"),this.feePayer)t=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");t=this.signatures[0].publicKey}for(var n=0;n<this.instructions.length;n++)if(void 0===this.instructions[n].programId)throw new Error("Transaction instruction index ".concat(n," has undefined program id"));var s=[],o=[];this.instructions.forEach((function(e){e.keys.forEach((function(e){o.push(U({},e))}));var t=e.programId.toString();s.includes(t)||s.push(t)})),s.forEach((function(e){o.push({pubkey:new sr(e),isSigner:!1,isWritable:!1})})),o.sort((function(e,t){var r=e.isSigner===t.isSigner?0:e.isSigner?-1:1,n=e.isWritable===t.isWritable?0:e.isWritable?-1:1;return r||n}));var a=[];o.forEach((function(e){var t=e.pubkey.toString(),r=a.findIndex((function(e){return e.pubkey.toString()===t}));r>-1?a[r].isWritable=a[r].isWritable||e.isWritable:a.push(e)}));var u=a.findIndex((function(e){return e.pubkey.equals(t)}));if(u>-1){var c=a.splice(u,1),h=(0,i.Z)(c,1)[0];h.isSigner=!0,h.isWritable=!0,a.unshift(h)}else a.unshift({pubkey:t,isSigner:!0,isWritable:!0});var l,p=C(this.signatures);try{var f=function(){var e=l.value,t=a.findIndex((function(t){return t.pubkey.equals(e.publicKey)}));if(!(t>-1))throw new Error("unknown signer: ".concat(e.publicKey.toString()));a[t].isSigner||(a[t].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))};for(p.s();!(l=p.n()).done;)f()}catch(S){p.e(S)}finally{p.f()}var d=0,g=0,b=0,y=[],k=[];a.forEach((function(e){var t=e.pubkey,r=e.isSigner,n=e.isWritable;r?(y.push(t.toString()),d+=1,n||(g+=1)):(k.push(t.toString()),n||(b+=1))}));var m=y.concat(k),v=this.instructions.map((function(e){var t=e.data,r=e.programId;return{programIdIndex:m.indexOf(r.toString()),accounts:e.keys.map((function(e){return m.indexOf(e.pubkey.toString())})),data:w().encode(t)}}));return v.forEach((function(e){kr(e.programIdIndex>=0),e.accounts.forEach((function(e){return kr(e>=0)}))})),new yr({header:{numRequiredSignatures:d,numReadonlySignedAccounts:g,numReadonlyUnsignedAccounts:b},accountKeys:m,recentBlockhash:r,instructions:v})}},{key:"_compile",value:function(){var e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);if(this.signatures.length===t.length&&this.signatures.every((function(e,r){return t[r].equals(e.publicKey)})))return e;return this.signatures=t.map((function(e){return{signature:null,publicKey:e}})),e}},{key:"serializeMessage",value:function(){return this._compile().serialize()}},{key:"setSigners",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");var n=new Set;this.signatures=t.filter((function(e){var t=e.toString();return!n.has(t)&&(n.add(t),!0)})).map((function(e){return{signature:null,publicKey:e}}))}},{key:"sign",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");for(var n=new Set,i=[],s=0,o=t;s<o.length;s++){var a=o[s],u=a.publicKey.toString();n.has(u)||(n.add(u),i.push(a))}this.signatures=i.map((function(e){return{signature:null,publicKey:e.publicKey}}));var c=this._compile();this._partialSign.apply(this,[c].concat(i)),this._verifySignatures(c.serialize(),!0)}},{key:"partialSign",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");for(var n=new Set,i=[],s=0,o=t;s<o.length;s++){var a=o[s],u=a.publicKey.toString();n.has(u)||(n.add(u),i.push(a))}var c=this._compile();this._partialSign.apply(this,[c].concat(i))}},{key:"_partialSign",value:function(e){for(var t=this,r=e.serialize(),n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];i.forEach((function(e){var n=b().sign.detached(r,e.secretKey);t._addSignature(e.publicKey,N(n))}))}},{key:"addSignature",value:function(e,t){this._compile(),this._addSignature(e,t)}},{key:"_addSignature",value:function(e,t){kr(64===t.length);var r=this.signatures.findIndex((function(t){return e.equals(t.publicKey)}));if(r<0)throw new Error("unknown signer: ".concat(e.toString()));this.signatures[r].signature=y.lW.from(t)}},{key:"verifySignatures",value:function(){return this._verifySignatures(this.serializeMessage(),!0)}},{key:"_verifySignatures",value:function(e,t){var r,n=C(this.signatures);try{for(n.s();!(r=n.n()).done;){var i=r.value,s=i.signature,o=i.publicKey;if(null===s){if(t)return!1}else if(!b().sign.detached.verify(e,s,o.toBuffer()))return!1}}catch(a){n.e(a)}finally{n.f()}return!0}},{key:"serialize",value:function(e){var t=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),r=t.requireAllSignatures,n=t.verifySignatures,i=this.serializeMessage();if(n&&!this._verifySignatures(i,r))throw new Error("Signature verification failed");return this._serialize(i)}},{key:"_serialize",value:function(e){var t=this.signatures,r=[];br(r,t.length);var n=r.length+64*t.length+e.length,i=y.lW.alloc(n);return kr(t.length<256),y.lW.from(r).copy(i,0),t.forEach((function(e,t){var n=e.signature;null!==n&&(kr(64===n.length,"signature has invalid length"),y.lW.from(n).copy(i,r.length+64*t))})),e.copy(i,r.length+64*t.length),kr(i.length<=vr,"Transaction too large: ".concat(i.length," > ").concat(vr)),i}},{key:"keys",get:function(){return kr(1===this.instructions.length),this.instructions[0].keys.map((function(e){return e.pubkey}))}},{key:"programId",get:function(){return kr(1===this.instructions.length),this.instructions[0].programId}},{key:"data",get:function(){return kr(1===this.instructions.length),this.instructions[0].data}}],[{key:"from",value:function(t){for(var r=(0,o.Z)(t),n=gr(r),i=[],s=0;s<n;s++){var a=r.slice(0,64);r=r.slice(64),i.push(w().encode(y.lW.from(a)))}return e.populate(yr.from(r),i)}},{key:"populate",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=new e;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),r.forEach((function(e,r){var i={signature:e==w().encode(mr)?null:w().decode(e),publicKey:t.accountKeys[r]};n.signatures.push(i)})),t.instructions.forEach((function(e){var r=e.accounts.map((function(e){var r=t.accountKeys[e];return{pubkey:r,isSigner:n.signatures.some((function(e){return e.publicKey.toString()===r.toString()}))||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}}));n.instructions.push(new wr({keys:r,programId:t.accountKeys[e.programIdIndex],data:w().decode(e.data)}))})),n}}]),e}(),xr=new sr("SysvarC1ock11111111111111111111111111111111"),_r=new sr("SysvarRecentB1ockHashes11111111111111111111"),Ir=new sr("SysvarRent111111111111111111111111111111111"),Ar=new sr("SysvarRewards111111111111111111111111111111"),Er=new sr("SysvarStakeHistory1111111111111111111111111"),Pr=new sr("Sysvar1nstructions1111111111111111111111111");function Rr(e,t,r,n){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,a.Z)(d().mark((function e(t,r,n,i){var s,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment},e.next=3,t.sendTransaction(r,n,s);case 3:return o=e.sent,e.next=6,t.confirmTransaction(o,i&&i.commitment);case 6:if(!(a=e.sent.value).err){e.next=9;break}throw new Error("Transaction ".concat(o," failed (").concat(JSON.stringify(a),")"));case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Or(e){return new Promise((function(t){return setTimeout(t,e)}))}function Cr(e,t){var r=e.layout.span>=0?e.layout.span:function(e,t){var r=0;return e.layout.fields.forEach((function(e){e.span>=0?r+=e.span:"function"==typeof e.alloc&&(r+=e.alloc(t[e.property]))})),r}(e,t),n=y.lW.alloc(r),i=Object.assign({instruction:e.index},t);return e.layout.encode(i,n),n}function Wr(e,t){var r;try{r=e.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(r.instruction!==e.index)throw new Error("invalid instruction; instruction index mismatch ".concat(r.instruction," != ").concat(e.index));return r}var Br=x.nu64("lamportsPerSignature"),Ur=x.struct([x.u32("version"),x.u32("state"),fr("authorizedPubkey"),fr("nonce"),x.struct([Br],"feeCalculator")]),Zr=Ur.span,Nr=function(){function e(t){(0,l.Z)(this,e),this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}return(0,p.Z)(e,null,[{key:"fromAccountData",value:function(t){var r=Ur.decode(N(t),0);return new e({authorizedPubkey:new sr(r.authorizedPubkey),nonce:new sr(r.nonce).toString(),feeCalculator:r.feeCalculator})}}]),e}(),zr=function(){function e(){(0,l.Z)(this,e)}return(0,p.Z)(e,null,[{key:"decodeInstructionType",value:function(e){this.checkProgramId(e.programId);for(var t,r=x.u32("instruction").decode(e.data),n=0,s=Object.entries(Lr);n<s.length;n++){var o=(0,i.Z)(s[n],2),a=o[0];if(o[1].index==r){t=a;break}}if(!t)throw new Error("Instruction type incorrect; not a SystemInstruction");return t}},{key:"decodeCreateAccount",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=Wr(Lr.Create,e.data),r=t.lamports,n=t.space,i=t.programId;return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:r,space:n,programId:new sr(i)}}},{key:"decodeTransfer",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=Wr(Lr.Transfer,e.data).lamports;return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}},{key:"decodeTransferWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=Wr(Lr.TransferWithSeed,e.data),r=t.lamports,n=t.seed,i=t.programId;return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:r,seed:n,programId:new sr(i)}}},{key:"decodeAllocate",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);var t=Wr(Lr.Allocate,e.data).space;return{accountPubkey:e.keys[0].pubkey,space:t}}},{key:"decodeAllocateWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);var t=Wr(Lr.AllocateWithSeed,e.data),r=t.base,n=t.seed,i=t.space,s=t.programId;return{accountPubkey:e.keys[0].pubkey,basePubkey:new sr(r),seed:n,space:i,programId:new sr(s)}}},{key:"decodeAssign",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);var t=Wr(Lr.Assign,e.data).programId;return{accountPubkey:e.keys[0].pubkey,programId:new sr(t)}}},{key:"decodeAssignWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);var t=Wr(Lr.AssignWithSeed,e.data),r=t.base,n=t.seed,i=t.programId;return{accountPubkey:e.keys[0].pubkey,basePubkey:new sr(r),seed:n,programId:new sr(i)}}},{key:"decodeCreateWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=Wr(Lr.CreateWithSeed,e.data),r=t.base,n=t.seed,i=t.lamports,s=t.space,o=t.programId;return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new sr(r),seed:n,lamports:i,space:s,programId:new sr(o)}}},{key:"decodeNonceInitialize",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=Wr(Lr.InitializeNonceAccount,e.data).authorized;return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new sr(t)}}},{key:"decodeNonceAdvance",value:function(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Wr(Lr.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}},{key:"decodeNonceWithdraw",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);var t=Wr(Lr.WithdrawNonceAccount,e.data).lamports;return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}},{key:"decodeNonceAuthorize",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=Wr(Lr.AuthorizeNonceAccount,e.data).authorized;return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new sr(t)}}},{key:"checkProgramId",value:function(e){if(!e.equals(Kr.programId))throw new Error("invalid instruction; programId is not SystemProgram")}},{key:"checkKeyLength",value:function(e,t){if(e.length<t)throw new Error("invalid instruction; found ".concat(e.length," keys, expected at least ").concat(t))}}]),e}(),Lr=Object.freeze({Create:{index:0,layout:x.struct([x.u32("instruction"),x.ns64("lamports"),x.ns64("space"),fr("programId")])},Assign:{index:1,layout:x.struct([x.u32("instruction"),fr("programId")])},Transfer:{index:2,layout:x.struct([x.u32("instruction"),x.ns64("lamports")])},CreateWithSeed:{index:3,layout:x.struct([x.u32("instruction"),fr("base"),dr("seed"),x.ns64("lamports"),x.ns64("space"),fr("programId")])},AdvanceNonceAccount:{index:4,layout:x.struct([x.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:x.struct([x.u32("instruction"),x.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:x.struct([x.u32("instruction"),fr("authorized")])},AuthorizeNonceAccount:{index:7,layout:x.struct([x.u32("instruction"),fr("authorized")])},Allocate:{index:8,layout:x.struct([x.u32("instruction"),x.ns64("space")])},AllocateWithSeed:{index:9,layout:x.struct([x.u32("instruction"),fr("base"),dr("seed"),x.ns64("space"),fr("programId")])},AssignWithSeed:{index:10,layout:x.struct([x.u32("instruction"),fr("base"),dr("seed"),fr("programId")])},TransferWithSeed:{index:11,layout:x.struct([x.u32("instruction"),x.ns64("lamports"),dr("seed"),fr("programId")])}}),Kr=function(){function e(){(0,l.Z)(this,e)}return(0,p.Z)(e,null,[{key:"createAccount",value:function(e){var t=Cr(Lr.Create,{lamports:e.lamports,space:e.space,programId:N(e.programId.toBuffer())});return new wr({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}},{key:"transfer",value:function(e){var t,r;"basePubkey"in e?(t=Cr(Lr.TransferWithSeed,{lamports:e.lamports,seed:e.seed,programId:N(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]):(t=Cr(Lr.Transfer,{lamports:e.lamports}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]);return new wr({keys:r,programId:this.programId,data:t})}},{key:"assign",value:function(e){var t,r;"basePubkey"in e?(t=Cr(Lr.AssignWithSeed,{base:N(e.basePubkey.toBuffer()),seed:e.seed,programId:N(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=Cr(Lr.Assign,{programId:N(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]);return new wr({keys:r,programId:this.programId,data:t})}},{key:"createAccountWithSeed",value:function(e){var t=Cr(Lr.CreateWithSeed,{base:N(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:N(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&r.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new wr({keys:r,programId:this.programId,data:t})}},{key:"createNonceAccount",value:function(t){var r=new Sr;"basePubkey"in t&&"seed"in t?r.add(e.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Zr,programId:this.programId})):r.add(e.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Zr,programId:this.programId}));var n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return r.add(this.nonceInitialize(n)),r}},{key:"nonceInitialize",value:function(e){var t=Cr(Lr.InitializeNonceAccount,{authorized:N(e.authorizedPubkey.toBuffer())}),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:_r,isSigner:!1,isWritable:!1},{pubkey:Ir,isSigner:!1,isWritable:!1}],programId:this.programId,data:t};return new wr(r)}},{key:"nonceAdvance",value:function(e){var t=Cr(Lr.AdvanceNonceAccount),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:_r,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t};return new wr(r)}},{key:"nonceWithdraw",value:function(e){var t=Cr(Lr.WithdrawNonceAccount,{lamports:e.lamports});return new wr({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:_r,isSigner:!1,isWritable:!1},{pubkey:Ir,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}},{key:"nonceAuthorize",value:function(e){var t=Cr(Lr.AuthorizeNonceAccount,{authorized:N(e.newAuthorizedPubkey.toBuffer())});return new wr({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}},{key:"allocate",value:function(e){var t,r;"basePubkey"in e?(t=Cr(Lr.AllocateWithSeed,{base:N(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:N(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=Cr(Lr.Allocate,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]);return new wr({keys:r,programId:this.programId,data:t})}}]),e}();Kr.programId=new sr("11111111111111111111111111111111");var jr=vr-300,Dr=function(){function e(){(0,l.Z)(this,e)}var t;return(0,p.Z)(e,null,[{key:"getMinNumSignatures",value:function(t){return 2*(Math.ceil(t/e.chunkSize)+1+1)}},{key:"load",value:(t=(0,a.Z)(d().mark((function t(r,n,i,s,o){var a,u,c,h,l,p,f,g,b,k,m,v,w,S;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.getMinimumBalanceForRentExemption(o.length);case 2:return a=t.sent,t.next=5,r.getAccountInfo(i.publicKey,"confirmed");case 5:if(u=t.sent,c=null,null===u){t.next=16;break}if(!u.executable){t.next=11;break}return console.error("Program load failed, account is already executable"),t.abrupt("return",!1);case 11:u.data.length!==o.length&&(c=c||new Sr).add(Kr.allocate({accountPubkey:i.publicKey,space:o.length})),u.owner.equals(s)||(c=c||new Sr).add(Kr.assign({accountPubkey:i.publicKey,programId:s})),u.lamports<a&&(c=c||new Sr).add(Kr.transfer({fromPubkey:n.publicKey,toPubkey:i.publicKey,lamports:a-u.lamports})),t.next=17;break;case 16:c=(new Sr).add(Kr.createAccount({fromPubkey:n.publicKey,newAccountPubkey:i.publicKey,lamports:a>0?a:1,space:o.length,programId:s}));case 17:if(null===c){t.next=20;break}return t.next=20,Rr(r,c,[n,i],{commitment:"confirmed"});case 20:h=x.struct([x.u32("instruction"),x.u32("offset"),x.u32("bytesLength"),x.u32("bytesLengthPadding"),x.seq(x.u8("byte"),x.offset(x.u32(),-8),"bytes")]),l=e.chunkSize,p=0,f=o,g=[];case 25:if(!(f.length>0)){t.next=39;break}if(b=f.slice(0,l),k=y.lW.alloc(l+16),h.encode({instruction:0,offset:p,bytes:b},k),m=(new Sr).add({keys:[{pubkey:i.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:k}),g.push(Rr(r,m,[n,i],{commitment:"confirmed"})),!r._rpcEndpoint.includes("solana.com")){t.next=35;break}return t.next=35,Or(250);case 35:p+=l,f=f.slice(l),t.next=25;break;case 39:return t.next=41,Promise.all(g);case 41:return v=x.struct([x.u32("instruction")]),w=y.lW.alloc(v.span),v.encode({instruction:1},w),S=(new Sr).add({keys:[{pubkey:i.publicKey,isSigner:!0,isWritable:!0},{pubkey:Ir,isSigner:!1,isWritable:!1}],programId:s,data:w}),t.next=47,Rr(r,S,[n,i],{commitment:"confirmed"});case 47:return t.abrupt("return",!0);case 48:case"end":return t.stop()}}),t)}))),function(e,r,n,i,s){return t.apply(this,arguments)})}]),e}();Dr.chunkSize=jr;var qr=new sr("BPFLoader2111111111111111111111111111111111"),Mr=function(){function e(){(0,l.Z)(this,e)}return(0,p.Z)(e,null,[{key:"getMinNumSignatures",value:function(e){return Dr.getMinNumSignatures(e)}},{key:"load",value:function(e,t,r,n,i){return Dr.load(e,t,r,i,n)}}]),e}(),Gr={exports:{}};!function(e,t){var r="undefined"!=typeof self?self:z,n=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();!function(e){!function(t){var r="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in e,o="ArrayBuffer"in e;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function h(e){return"string"!=typeof e&&(e=String(e)),e}function l(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function f(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function d(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function g(e){var t=new FileReader,r=d(t);return t.readAsArrayBuffer(e),r}function b(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o&&i&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=b(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=b(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e,t,r,n=f(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=d(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=c(e),t=h(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},p.prototype.delete=function(e){delete this.map[c(e)]},p.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},p.prototype.set=function(e,t){this.map[c(e)]=h(t)},p.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),l(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),l(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),l(e)},n&&(p.prototype[Symbol.iterator]=p.prototype.entries);var k=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(e,t){var r,n,i=(t=t||{}).body;if(e instanceof m){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),k.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function v(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function w(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},y.call(m.prototype),y.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var S=[301,302,303,307,308];w.redirect=function(e,t){if(-1===S.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(_){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function x(e,r){return new Promise((function(n,s){var o=new m(e,r);if(o.signal&&o.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;n(new w(i,r))},a.onerror=function(){s(new TypeError("Network request failed"))},a.ontimeout=function(){s(new TypeError("Network request failed"))},a.onabort=function(){s(new t.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",u)}),a.send(void 0===o._bodyInit?null:o._bodyInit)}))}x.polyfill=!0,e.fetch||(e.fetch=x,e.Headers=p,e.Request=m,e.Response=w),t.Headers=p,t.Request=m,t.Response=w,t.fetch=x,Object.defineProperty(t,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t}(Gr,Gr.exports);var Fr=L(Gr.exports);function Xr(e){for(var t=0;e>1;)e/=2,t++;return t}var Hr=function(){function e(t,r,n,i,s){(0,l.Z)(this,e),this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=r,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}return(0,p.Z)(e,[{key:"getEpoch",value:function(e){return this.getEpochAndSlotIndex(e)[0]}},{key:"getEpochAndSlotIndex",value:function(e){if(e<this.firstNormalSlot){var t=Xr(0===(r=e+32+1)?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,1+(r|=r>>32)))-Xr(32)-1;return[t,e-(this.getSlotsInEpoch(t)-32)]}var r,n=e-this.firstNormalSlot,i=Math.floor(n/this.slotsPerEpoch);return[this.firstNormalEpoch+i,n%this.slotsPerEpoch]}},{key:"getFirstSlotInEpoch",value:function(e){return e<=this.firstNormalEpoch?32*(Math.pow(2,e)-1):(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}},{key:"getLastSlotInEpoch",value:function(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}},{key:"getSlotsInEpoch",value:function(e){return e<this.firstNormalEpoch?Math.pow(2,e+Xr(32)):this.slotsPerEpoch}}]),e}(),Vr=function(e){(0,u.Z)(r,e);var t=Z(r);function r(e,n){var i;return(0,l.Z)(this,r),(i=t.call(this,e)).logs=void 0,i.logs=n,i}return r}((0,n.Z)(Error));function Yr(e,t){var r,n=new Promise((function(e){r=setTimeout((function(){return e(null)}),t)}));return Promise.race([e,n]).then((function(e){return clearTimeout(r),e}))}var Jr=(0,_.oQ)((0,_.eE)(sr),(0,_.Z_)(),(function(e){return new sr(e)})),Qr=(0,_.bc)([(0,_.Z_)(),(0,_.i0)("base64")]),$r=(0,_.oQ)((0,_.eE)(y.lW),Qr,(function(e){return y.lW.from(e[0],"base64")})),en=3e4;function tn(e){return(0,_.G0)([(0,_.dt)({jsonrpc:(0,_.i0)("2.0"),id:(0,_.Z_)(),result:e}),(0,_.dt)({jsonrpc:(0,_.i0)("2.0"),id:(0,_.Z_)(),error:(0,_.dt)({code:(0,_._4)(),message:(0,_.Z_)(),data:(0,_.jt)((0,_.Yj)())})})])}var rn=tn((0,_._4)());function nn(e){return(0,_.oQ)(tn(e),rn,(function(t){return"error"in t?t:U(U({},t),{},{result:(0,_.Ue)(t.result,e)})}))}function sn(e){return nn((0,_.dt)({context:(0,_.dt)({slot:(0,_.Rx)()}),value:e}))}function on(e){return(0,_.dt)({context:(0,_.dt)({slot:(0,_.Rx)()}),value:e})}var an=(0,_.dt)({foundation:(0,_.Rx)(),foundationTerm:(0,_.Rx)(),initial:(0,_.Rx)(),taper:(0,_.Rx)(),terminal:(0,_.Rx)()}),un=nn((0,_.IX)((0,_.AG)((0,_.dt)({epoch:(0,_.Rx)(),effectiveSlot:(0,_.Rx)(),amount:(0,_.Rx)(),postBalance:(0,_.Rx)()})))),cn=(0,_.dt)({epoch:(0,_.Rx)(),slotIndex:(0,_.Rx)(),slotsInEpoch:(0,_.Rx)(),absoluteSlot:(0,_.Rx)(),blockHeight:(0,_.jt)((0,_.Rx)()),transactionCount:(0,_.jt)((0,_.Rx)())}),hn=(0,_.dt)({slotsPerEpoch:(0,_.Rx)(),leaderScheduleSlotOffset:(0,_.Rx)(),warmup:(0,_.O7)(),firstNormalEpoch:(0,_.Rx)(),firstNormalSlot:(0,_.Rx)()}),ln=(0,_.IM)((0,_.Z_)(),(0,_.IX)((0,_.Rx)())),pn=(0,_.AG)((0,_.G0)([(0,_.dt)({}),(0,_.Z_)()])),fn=(0,_.dt)({err:pn}),dn=(0,_.i0)("receivedSignature"),gn=(0,_.dt)({"solana-core":(0,_.Z_)(),"feature-set":(0,_.jt)((0,_.Rx)())}),bn=sn((0,_.dt)({err:(0,_.AG)((0,_.G0)([(0,_.dt)({}),(0,_.Z_)()])),logs:(0,_.AG)((0,_.IX)((0,_.Z_)())),accounts:(0,_.jt)((0,_.AG)((0,_.IX)((0,_.dt)({executable:(0,_.O7)(),owner:(0,_.Z_)(),lamports:(0,_.Rx)(),data:(0,_.IX)((0,_.Z_)()),rentEpoch:(0,_.jt)((0,_.Rx)())})))),unitsConsumed:(0,_.jt)((0,_.Rx)())}));var yn=nn(an),kn=nn(cn),mn=nn(hn),vn=nn(ln),wn=nn((0,_.Rx)()),Sn=sn((0,_.dt)({total:(0,_.Rx)(),circulating:(0,_.Rx)(),nonCirculating:(0,_.Rx)(),nonCirculatingAccounts:(0,_.IX)(Jr)})),xn=(0,_.dt)({amount:(0,_.Z_)(),uiAmount:(0,_.AG)((0,_.Rx)()),decimals:(0,_.Rx)(),uiAmountString:(0,_.jt)((0,_.Z_)())}),_n=sn((0,_.IX)((0,_.dt)({address:Jr,amount:(0,_.Z_)(),uiAmount:(0,_.AG)((0,_.Rx)()),decimals:(0,_.Rx)(),uiAmountString:(0,_.jt)((0,_.Z_)())}))),In=sn((0,_.IX)((0,_.dt)({pubkey:Jr,account:(0,_.dt)({executable:(0,_.O7)(),owner:Jr,lamports:(0,_.Rx)(),data:$r,rentEpoch:(0,_.Rx)()})}))),An=(0,_.dt)({program:(0,_.Z_)(),parsed:(0,_._4)(),space:(0,_.Rx)()}),En=sn((0,_.IX)((0,_.dt)({pubkey:Jr,account:(0,_.dt)({executable:(0,_.O7)(),owner:Jr,lamports:(0,_.Rx)(),data:An,rentEpoch:(0,_.Rx)()})}))),Pn=sn((0,_.IX)((0,_.dt)({lamports:(0,_.Rx)(),address:Jr}))),Rn=(0,_.dt)({executable:(0,_.O7)(),owner:Jr,lamports:(0,_.Rx)(),data:$r,rentEpoch:(0,_.Rx)()}),Tn=(0,_.dt)({pubkey:Jr,account:Rn}),On=(0,_.oQ)((0,_.G0)([(0,_.eE)(y.lW),An]),(0,_.G0)([Qr,An]),(function(e){return Array.isArray(e)?(0,_.Ue)(e,$r):e})),Cn=(0,_.dt)({executable:(0,_.O7)(),owner:Jr,lamports:(0,_.Rx)(),data:On,rentEpoch:(0,_.Rx)()}),Wn=(0,_.dt)({pubkey:Jr,account:Cn}),Bn=(0,_.dt)({state:(0,_.G0)([(0,_.i0)("active"),(0,_.i0)("inactive"),(0,_.i0)("activating"),(0,_.i0)("deactivating")]),active:(0,_.Rx)(),inactive:(0,_.Rx)()}),Un=nn((0,_.IX)((0,_.dt)({signature:(0,_.Z_)(),slot:(0,_.Rx)(),err:pn,memo:(0,_.AG)((0,_.Z_)()),blockTime:(0,_.jt)((0,_.AG)((0,_.Rx)()))}))),Zn=nn((0,_.IX)((0,_.dt)({signature:(0,_.Z_)(),slot:(0,_.Rx)(),err:pn,memo:(0,_.AG)((0,_.Z_)()),blockTime:(0,_.jt)((0,_.AG)((0,_.Rx)()))}))),Nn=(0,_.dt)({subscription:(0,_.Rx)(),result:on(Rn)}),zn=(0,_.dt)({pubkey:Jr,account:Rn}),Ln=(0,_.dt)({subscription:(0,_.Rx)(),result:on(zn)}),Kn=(0,_.dt)({parent:(0,_.Rx)(),slot:(0,_.Rx)(),root:(0,_.Rx)()}),jn=(0,_.dt)({subscription:(0,_.Rx)(),result:Kn}),Dn=(0,_.G0)([(0,_.dt)({type:(0,_.G0)([(0,_.i0)("firstShredReceived"),(0,_.i0)("completed"),(0,_.i0)("optimisticConfirmation"),(0,_.i0)("root")]),slot:(0,_.Rx)(),timestamp:(0,_.Rx)()}),(0,_.dt)({type:(0,_.i0)("createdBank"),parent:(0,_.Rx)(),slot:(0,_.Rx)(),timestamp:(0,_.Rx)()}),(0,_.dt)({type:(0,_.i0)("frozen"),slot:(0,_.Rx)(),timestamp:(0,_.Rx)(),stats:(0,_.dt)({numTransactionEntries:(0,_.Rx)(),numSuccessfulTransactions:(0,_.Rx)(),numFailedTransactions:(0,_.Rx)(),maxTransactionsPerEntry:(0,_.Rx)()})}),(0,_.dt)({type:(0,_.i0)("dead"),slot:(0,_.Rx)(),timestamp:(0,_.Rx)(),err:(0,_.Z_)()})]),qn=(0,_.dt)({subscription:(0,_.Rx)(),result:Dn}),Mn=(0,_.dt)({subscription:(0,_.Rx)(),result:on((0,_.G0)([fn,dn]))}),Gn=(0,_.dt)({subscription:(0,_.Rx)(),result:(0,_.Rx)()}),Fn=(0,_.dt)({pubkey:(0,_.Z_)(),gossip:(0,_.AG)((0,_.Z_)()),tpu:(0,_.AG)((0,_.Z_)()),rpc:(0,_.AG)((0,_.Z_)()),version:(0,_.AG)((0,_.Z_)())}),Xn=(0,_.dt)({votePubkey:(0,_.Z_)(),nodePubkey:(0,_.Z_)(),activatedStake:(0,_.Rx)(),epochVoteAccount:(0,_.O7)(),epochCredits:(0,_.IX)((0,_.bc)([(0,_.Rx)(),(0,_.Rx)(),(0,_.Rx)()])),commission:(0,_.Rx)(),lastVote:(0,_.Rx)(),rootSlot:(0,_.AG)((0,_.Rx)())}),Hn=nn((0,_.dt)({current:(0,_.IX)(Xn),delinquent:(0,_.IX)(Xn)})),Vn=(0,_.G0)([(0,_.i0)("processed"),(0,_.i0)("confirmed"),(0,_.i0)("finalized")]),Yn=(0,_.dt)({slot:(0,_.Rx)(),confirmations:(0,_.AG)((0,_.Rx)()),err:pn,confirmationStatus:(0,_.jt)(Vn)}),Jn=sn((0,_.IX)((0,_.AG)(Yn))),Qn=nn((0,_.Rx)()),$n=(0,_.dt)({signatures:(0,_.IX)((0,_.Z_)()),message:(0,_.dt)({accountKeys:(0,_.IX)((0,_.Z_)()),header:(0,_.dt)({numRequiredSignatures:(0,_.Rx)(),numReadonlySignedAccounts:(0,_.Rx)(),numReadonlyUnsignedAccounts:(0,_.Rx)()}),instructions:(0,_.IX)((0,_.dt)({accounts:(0,_.IX)((0,_.Rx)()),data:(0,_.Z_)(),programIdIndex:(0,_.Rx)()})),recentBlockhash:(0,_.Z_)()})}),ei=(0,_.dt)({parsed:(0,_._4)(),program:(0,_.Z_)(),programId:Jr}),ti=(0,_.dt)({accounts:(0,_.IX)(Jr),data:(0,_.Z_)(),programId:Jr}),ri=(0,_.G0)([ti,ei]),ni=(0,_.G0)([(0,_.dt)({parsed:(0,_._4)(),program:(0,_.Z_)(),programId:(0,_.Z_)()}),(0,_.dt)({accounts:(0,_.IX)((0,_.Z_)()),data:(0,_.Z_)(),programId:(0,_.Z_)()})]),ii=(0,_.oQ)(ri,ni,(function(e){return"accounts"in e?(0,_.Ue)(e,ti):(0,_.Ue)(e,ei)})),si=(0,_.dt)({signatures:(0,_.IX)((0,_.Z_)()),message:(0,_.dt)({accountKeys:(0,_.IX)((0,_.dt)({pubkey:Jr,signer:(0,_.O7)(),writable:(0,_.O7)()})),instructions:(0,_.IX)(ii),recentBlockhash:(0,_.Z_)()})}),oi=(0,_.dt)({accountIndex:(0,_.Rx)(),mint:(0,_.Z_)(),uiTokenAmount:xn}),ai=(0,_.dt)({err:pn,fee:(0,_.Rx)(),innerInstructions:(0,_.jt)((0,_.AG)((0,_.IX)((0,_.dt)({index:(0,_.Rx)(),instructions:(0,_.IX)((0,_.dt)({accounts:(0,_.IX)((0,_.Rx)()),data:(0,_.Z_)(),programIdIndex:(0,_.Rx)()}))})))),preBalances:(0,_.IX)((0,_.Rx)()),postBalances:(0,_.IX)((0,_.Rx)()),logMessages:(0,_.jt)((0,_.AG)((0,_.IX)((0,_.Z_)()))),preTokenBalances:(0,_.jt)((0,_.AG)((0,_.IX)(oi))),postTokenBalances:(0,_.jt)((0,_.AG)((0,_.IX)(oi)))}),ui=(0,_.dt)({err:pn,fee:(0,_.Rx)(),innerInstructions:(0,_.jt)((0,_.AG)((0,_.IX)((0,_.dt)({index:(0,_.Rx)(),instructions:(0,_.IX)(ii)})))),preBalances:(0,_.IX)((0,_.Rx)()),postBalances:(0,_.IX)((0,_.Rx)()),logMessages:(0,_.jt)((0,_.AG)((0,_.IX)((0,_.Z_)()))),preTokenBalances:(0,_.jt)((0,_.AG)((0,_.IX)(oi))),postTokenBalances:(0,_.jt)((0,_.AG)((0,_.IX)(oi)))}),ci=nn((0,_.AG)((0,_.dt)({blockhash:(0,_.Z_)(),previousBlockhash:(0,_.Z_)(),parentSlot:(0,_.Rx)(),transactions:(0,_.IX)((0,_.dt)({transaction:$n,meta:(0,_.AG)(ai)})),rewards:(0,_.jt)((0,_.IX)((0,_.dt)({pubkey:(0,_.Z_)(),lamports:(0,_.Rx)(),postBalance:(0,_.AG)((0,_.Rx)()),rewardType:(0,_.AG)((0,_.Z_)())}))),blockTime:(0,_.AG)((0,_.Rx)())}))),hi=nn((0,_.AG)((0,_.dt)({blockhash:(0,_.Z_)(),previousBlockhash:(0,_.Z_)(),parentSlot:(0,_.Rx)(),signatures:(0,_.IX)((0,_.Z_)()),blockTime:(0,_.AG)((0,_.Rx)())}))),li=nn((0,_.AG)((0,_.dt)({slot:(0,_.Rx)(),meta:ai,blockTime:(0,_.jt)((0,_.AG)((0,_.Rx)())),transaction:$n}))),pi=nn((0,_.AG)((0,_.dt)({slot:(0,_.Rx)(),transaction:si,meta:(0,_.AG)(ui),blockTime:(0,_.jt)((0,_.AG)((0,_.Rx)()))}))),fi=sn((0,_.dt)({blockhash:(0,_.Z_)(),feeCalculator:(0,_.dt)({lamportsPerSignature:(0,_.Rx)()})})),di=(0,_.dt)({slot:(0,_.Rx)(),numTransactions:(0,_.Rx)(),numSlots:(0,_.Rx)(),samplePeriodSecs:(0,_.Rx)()}),gi=nn((0,_.IX)(di)),bi=sn((0,_.AG)((0,_.dt)({feeCalculator:(0,_.dt)({lamportsPerSignature:(0,_.Rx)()})}))),yi=nn((0,_.Z_)()),ki=nn((0,_.Z_)()),mi=(0,_.dt)({err:pn,logs:(0,_.IX)((0,_.Z_)()),signature:(0,_.Z_)()}),vi=(0,_.dt)({result:on(mi),subscription:(0,_.Rx)()}),wi=function(){function e(t,r){(0,l.Z)(this,e),this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={recentBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._accountChangeSubscriptionCounter=0,this._accountChangeSubscriptions={},this._programAccountChangeSubscriptionCounter=0,this._programAccountChangeSubscriptions={},this._rootSubscriptionCounter=0,this._rootSubscriptions={},this._signatureSubscriptionCounter=0,this._signatureSubscriptions={},this._slotSubscriptionCounter=0,this._slotSubscriptions={},this._logsSubscriptionCounter=0,this._logsSubscriptions={},this._slotUpdateSubscriptionCounter=0,this._slotUpdateSubscriptions={};var n,i,s,o,u,c=new URL(t);c.protocol;r&&"string"==typeof r?this._commitment=r:r&&(this._commitment=r.commitment,this._confirmTransactionInitialTimeout=r.confirmTransactionInitialTimeout,n=r.wsEndpoint,i=r.httpHeaders,s=r.fetchMiddleware,o=r.disableRetryOnRateLimit),this._rpcEndpoint=t,this._rpcWsEndpoint=n||function(e){var t=new URL(e),r="https:"===t.protocol;return t.protocol=r?"wss:":"ws:",t.host="",""!==t.port&&(t.port=String(Number(t.port)+1)),t.toString()}(t),this._rpcClient=function(e,t,r,n,i){var s;n&&(s=function(e,t){return new Promise((function(r,i){n(e,t,function(){var e=(0,a.Z)(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=r,e.next=4,Fr(t,n);case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),i(e.t2);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}())}))});var o=new(E())(function(){var t=(0,a.Z)(d().mark((function t(n,o){var a,u,c,h,l;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a={method:"POST",body:n,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},r||{})},t.prev=2,u=5,h=500;case 5:if(!s){t.next=11;break}return t.next=8,s(e,a);case 8:c=t.sent,t.next=14;break;case 11:return t.next=13,Fr(e,a);case 13:c=t.sent;case 14:if(429===c.status){t.next=16;break}return t.abrupt("break",27);case 16:if(!0!==i){t.next=18;break}return t.abrupt("break",27);case 18:if(0!=(u-=1)){t.next=21;break}return t.abrupt("break",27);case 21:return console.log("Server responded with ".concat(c.status," ").concat(c.statusText,".  Retrying after ").concat(h,"ms delay...")),t.next=24,Or(h);case 24:h*=2;case 25:t.next=5;break;case 27:return t.next=29,c.text();case 29:l=t.sent,c.ok?o(null,l):o(new Error("".concat(c.status," ").concat(c.statusText,": ").concat(l))),t.next=36;break;case 33:t.prev=33,t.t0=t.catch(2),t.t0 instanceof Error&&o(t.t0);case 36:return t.prev=36,t.finish(36);case 38:case"end":return t.stop()}}),t,null,[[2,33,36,38]])})));return function(e,r){return t.apply(this,arguments)}}(),{});return o}(c.toString(),0,i,s,o),this._rpcRequest=(u=this._rpcClient,function(e,t){return new Promise((function(r,n){u.request(e,t,(function(e,t){e?n(e):r(t)}))}))}),this._rpcBatchRequest=function(e){return function(t){return new Promise((function(r,n){0===t.length&&r([]);var i=t.map((function(t){return e.request(t.methodName,t.args)}));e.request(i,(function(e,t){e?n(e):r(t)}))}))}}(this._rpcClient),this._rpcWebSocket=new I.K(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}var t,r,n,s,u,c,h,f,g,b,y,k,m,v,S,x,A,P,R,T,O,W,B,Z,z,L,K,j,D,q,M,G,F,X,H,V,Y,J,Q,$,ee,te,re,ne,ie,se,oe,ae,ue,ce,he,le,pe,fe,de,ge,be,ye,ke,me,ve,we,Se,xe,_e,Ie,Ae,Ee,Pe,Re;return(0,p.Z)(e,[{key:"commitment",get:function(){return this._commitment}},{key:"getBalanceAndContext",value:(Re=(0,a.Z)(d().mark((function e(t,r){var n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getBalance",n);case 3:if(i=e.sent,!("error"in(s=(0,_.Ue)(i,sn((0,_.Rx)()))))){e.next=7;break}throw new Error("failed to get balance for "+t.toBase58()+": "+s.error.message);case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return Re.apply(this,arguments)})},{key:"getBalance",value:(Pe=(0,a.Z)(d().mark((function e(t,r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBalanceAndContext(t,r).then((function(e){return e.value})).catch((function(e){throw new Error("failed to get balance of account "+t.toBase58()+": "+e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return Pe.apply(this,arguments)})},{key:"getBlockTime",value:(Ee=(0,a.Z)(d().mark((function e(t){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getBlockTime",[t]);case 2:if(r=e.sent,!("error"in(n=(0,_.Ue)(r,nn((0,_.AG)((0,_.Rx)())))))){e.next=6;break}throw new Error("failed to get block time for slot "+t+": "+n.error.message);case 6:return e.abrupt("return",n.result);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return Ee.apply(this,arguments)})},{key:"getMinimumLedgerSlot",value:(Ae=(0,a.Z)(d().mark((function e(){var t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("minimumLedgerSlot",[]);case 2:if(t=e.sent,!("error"in(r=(0,_.Ue)(t,nn((0,_.Rx)()))))){e.next=6;break}throw new Error("failed to get minimum ledger slot: "+r.error.message);case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)}))),function(){return Ae.apply(this,arguments)})},{key:"getFirstAvailableBlock",value:(Ie=(0,a.Z)(d().mark((function e(){var t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getFirstAvailableBlock",[]);case 2:if(t=e.sent,!("error"in(r=(0,_.Ue)(t,wn)))){e.next=6;break}throw new Error("failed to get first available block: "+r.error.message);case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)}))),function(){return Ie.apply(this,arguments)})},{key:"getSupply",value:(_e=(0,a.Z)(d().mark((function e(t){var r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},r="string"==typeof t?{commitment:t}:t?U(U({},t),{},{commitment:t&&t.commitment||this.commitment}):{commitment:this.commitment},e.next=4,this._rpcRequest("getSupply",[r]);case 4:if(n=e.sent,!("error"in(i=(0,_.Ue)(n,Sn)))){e.next=8;break}throw new Error("failed to get supply: "+i.error.message);case 8:return e.abrupt("return",i.result);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return _e.apply(this,arguments)})},{key:"getTokenSupply",value:(xe=(0,a.Z)(d().mark((function e(t,r){var n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getTokenSupply",n);case 3:if(i=e.sent,!("error"in(s=(0,_.Ue)(i,sn(xn))))){e.next=7;break}throw new Error("failed to get token supply: "+s.error.message);case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return xe.apply(this,arguments)})},{key:"getTokenAccountBalance",value:(Se=(0,a.Z)(d().mark((function e(t,r){var n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getTokenAccountBalance",n);case 3:if(i=e.sent,!("error"in(s=(0,_.Ue)(i,sn(xn))))){e.next=7;break}throw new Error("failed to get token account balance: "+s.error.message);case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return Se.apply(this,arguments)})},{key:"getTokenAccountsByOwner",value:(we=(0,a.Z)(d().mark((function e(t,r,n){var i,s,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[t.toBase58()],"mint"in r?i.push({mint:r.mint.toBase58()}):i.push({programId:r.programId.toBase58()}),s=this._buildArgs(i,n,"base64"),e.next=5,this._rpcRequest("getTokenAccountsByOwner",s);case 5:if(o=e.sent,!("error"in(a=(0,_.Ue)(o,In)))){e.next=9;break}throw new Error("failed to get token accounts owned by account "+t.toBase58()+": "+a.error.message);case 9:return e.abrupt("return",a.result);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return we.apply(this,arguments)})},{key:"getParsedTokenAccountsByOwner",value:(ve=(0,a.Z)(d().mark((function e(t,r,n){var i,s,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[t.toBase58()],"mint"in r?i.push({mint:r.mint.toBase58()}):i.push({programId:r.programId.toBase58()}),s=this._buildArgs(i,n,"jsonParsed"),e.next=5,this._rpcRequest("getTokenAccountsByOwner",s);case 5:if(o=e.sent,!("error"in(a=(0,_.Ue)(o,En)))){e.next=9;break}throw new Error("failed to get token accounts owned by account "+t.toBase58()+": "+a.error.message);case 9:return e.abrupt("return",a.result);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return ve.apply(this,arguments)})},{key:"getLargestAccounts",value:(me=(0,a.Z)(d().mark((function e(t){var r,n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=U(U({},t),{},{commitment:t&&t.commitment||this.commitment}),n=r.filter||r.commitment?[r]:[],e.next=4,this._rpcRequest("getLargestAccounts",n);case 4:if(i=e.sent,!("error"in(s=(0,_.Ue)(i,Pn)))){e.next=8;break}throw new Error("failed to get largest accounts: "+s.error.message);case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return me.apply(this,arguments)})},{key:"getTokenLargestAccounts",value:(ke=(0,a.Z)(d().mark((function e(t,r){var n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getTokenLargestAccounts",n);case 3:if(i=e.sent,!("error"in(s=(0,_.Ue)(i,_n)))){e.next=7;break}throw new Error("failed to get token largest accounts: "+s.error.message);case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return ke.apply(this,arguments)})},{key:"getAccountInfoAndContext",value:(ye=(0,a.Z)(d().mark((function e(t,r){var n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r,"base64"),e.next=3,this._rpcRequest("getAccountInfo",n);case 3:if(i=e.sent,!("error"in(s=(0,_.Ue)(i,sn((0,_.AG)(Rn)))))){e.next=7;break}throw new Error("failed to get info about account "+t.toBase58()+": "+s.error.message);case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return ye.apply(this,arguments)})},{key:"getParsedAccountInfo",value:(be=(0,a.Z)(d().mark((function e(t,r){var n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r,"jsonParsed"),e.next=3,this._rpcRequest("getAccountInfo",n);case 3:if(i=e.sent,!("error"in(s=(0,_.Ue)(i,sn((0,_.AG)(Cn)))))){e.next=7;break}throw new Error("failed to get info about account "+t.toBase58()+": "+s.error.message);case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return be.apply(this,arguments)})},{key:"getAccountInfo",value:(ge=(0,a.Z)(d().mark((function e(t,r){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getAccountInfoAndContext(t,r);case 3:return n=e.sent,e.abrupt("return",n.value);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("failed to get info about account "+t.toBase58()+": "+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e,t){return ge.apply(this,arguments)})},{key:"getMultipleAccountsInfo",value:(de=(0,a.Z)(d().mark((function e(t,r){var n,i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return e.toBase58()})),i=this._buildArgs([n],r,"base64"),e.next=4,this._rpcRequest("getMultipleAccounts",i);case 4:if(s=e.sent,!("error"in(o=(0,_.Ue)(s,sn((0,_.IX)((0,_.AG)(Rn))))))){e.next=8;break}throw new Error("failed to get info for accounts "+n+": "+o.error.message);case 8:return e.abrupt("return",o.result.value);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return de.apply(this,arguments)})},{key:"getStakeActivation",value:(fe=(0,a.Z)(d().mark((function e(t,r,n){var i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._buildArgs([t.toBase58()],r,void 0,void 0!==n?{epoch:n}:void 0),e.next=3,this._rpcRequest("getStakeActivation",i);case 3:if(s=e.sent,!("error"in(o=(0,_.Ue)(s,nn(Bn))))){e.next=7;break}throw new Error("failed to get Stake Activation ".concat(t.toBase58(),": ").concat(o.error.message));case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return fe.apply(this,arguments)})},{key:"getProgramAccounts",value:(pe=(0,a.Z)(d().mark((function e(t,r){var n,i,s,o,a,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},r&&("string"==typeof r?i=r:(i=r.commitment,s=r.encoding,r.dataSlice&&(n.dataSlice=r.dataSlice),r.filters&&(n.filters=r.filters))),o=this._buildArgs([t.toBase58()],i,s||"base64",n),e.next=5,this._rpcRequest("getProgramAccounts",o);case 5:if(a=e.sent,!("error"in(u=(0,_.Ue)(a,nn((0,_.IX)(Tn)))))){e.next=9;break}throw new Error("failed to get accounts owned by program "+t.toBase58()+": "+u.error.message);case 9:return e.abrupt("return",u.result);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return pe.apply(this,arguments)})},{key:"getParsedProgramAccounts",value:(le=(0,a.Z)(d().mark((function e(t,r){var n,i,s,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},r&&("string"==typeof r?i=r:(i=r.commitment,r.filters&&(n.filters=r.filters))),s=this._buildArgs([t.toBase58()],i,"jsonParsed",n),e.next=5,this._rpcRequest("getProgramAccounts",s);case 5:if(o=e.sent,!("error"in(a=(0,_.Ue)(o,nn((0,_.IX)(Wn)))))){e.next=9;break}throw new Error("failed to get accounts owned by program "+t.toBase58()+": "+a.error.message);case 9:return e.abrupt("return",a.result);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return le.apply(this,arguments)})},{key:"confirmTransaction",value:(he=(0,a.Z)(d().mark((function e(t,r){var n,i,s,o,a,u,c,h,l=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=w().decode(t),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),new Error("signature must be base58 encoded: "+t);case 7:kr(64===n.length,"signature has invalid length"),i=Date.now(),s=r||this.commitment,a=null,u=new Promise((function(e,r){try{o=l.onSignature(t,(function(t,r){o=void 0,a={context:r,value:t},e(null)}),s)}catch(n){r(n)}})),c=this._confirmTransactionInitialTimeout||6e4,e.t1=s,e.next="processed"===e.t1||"recent"===e.t1||"single"===e.t1||"confirmed"===e.t1||"singleGossip"===e.t1?16:18;break;case 16:return c=this._confirmTransactionInitialTimeout||3e4,e.abrupt("break",18);case 18:return e.prev=18,e.next=21,Yr(u,c);case 21:return e.prev=21,o&&this.removeSignatureListener(o),e.finish(21);case 24:if(null!==a){e.next=27;break}throw h=(Date.now()-i)/1e3,new Error("Transaction was not confirmed in ".concat(h.toFixed(2)," seconds. It is unknown if it succeeded or failed. Check signature ").concat(t," using the Solana Explorer or CLI tools."));case 27:return e.abrupt("return",a);case 28:case"end":return e.stop()}}),e,this,[[0,4],[18,,21,24]])}))),function(e,t){return he.apply(this,arguments)})},{key:"getClusterNodes",value:(ce=(0,a.Z)(d().mark((function e(){var t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getClusterNodes",[]);case 2:if(t=e.sent,!("error"in(r=(0,_.Ue)(t,nn((0,_.IX)(Fn)))))){e.next=6;break}throw new Error("failed to get cluster nodes: "+r.error.message);case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)}))),function(){return ce.apply(this,arguments)})},{key:"getVoteAccounts",value:(ue=(0,a.Z)(d().mark((function e(t){var r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getVoteAccounts",r);case 3:if(n=e.sent,!("error"in(i=(0,_.Ue)(n,Hn)))){e.next=7;break}throw new Error("failed to get vote accounts: "+i.error.message);case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return ue.apply(this,arguments)})},{key:"getSlot",value:(ae=(0,a.Z)(d().mark((function e(t){var r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getSlot",r);case 3:if(n=e.sent,!("error"in(i=(0,_.Ue)(n,nn((0,_.Rx)()))))){e.next=7;break}throw new Error("failed to get slot: "+i.error.message);case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return ae.apply(this,arguments)})},{key:"getSlotLeader",value:(oe=(0,a.Z)(d().mark((function e(t){var r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getSlotLeader",r);case 3:if(n=e.sent,!("error"in(i=(0,_.Ue)(n,nn((0,_.Z_)()))))){e.next=7;break}throw new Error("failed to get slot leader: "+i.error.message);case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return oe.apply(this,arguments)})},{key:"getSlotLeaders",value:(se=(0,a.Z)(d().mark((function e(t,r){var n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[t,r],e.next=3,this._rpcRequest("getSlotLeaders",n);case 3:if(i=e.sent,!("error"in(s=(0,_.Ue)(i,nn((0,_.IX)(Jr)))))){e.next=7;break}throw new Error("failed to get slot leaders: "+s.error.message);case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return se.apply(this,arguments)})},{key:"getSignatureStatus",value:(ie=(0,a.Z)(d().mark((function e(t,r){var n,i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSignatureStatuses([t],r);case 2:return n=e.sent,i=n.context,kr(1===(s=n.value).length),o=s[0],e.abrupt("return",{context:i,value:o});case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return ie.apply(this,arguments)})},{key:"getSignatureStatuses",value:(ne=(0,a.Z)(d().mark((function e(t,r){var n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[t],r&&n.push(r),e.next=4,this._rpcRequest("getSignatureStatuses",n);case 4:if(i=e.sent,!("error"in(s=(0,_.Ue)(i,Jn)))){e.next=8;break}throw new Error("failed to get signature status: "+s.error.message);case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return ne.apply(this,arguments)})},{key:"getTransactionCount",value:(re=(0,a.Z)(d().mark((function e(t){var r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getTransactionCount",r);case 3:if(n=e.sent,!("error"in(i=(0,_.Ue)(n,nn((0,_.Rx)()))))){e.next=7;break}throw new Error("failed to get transaction count: "+i.error.message);case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return re.apply(this,arguments)})},{key:"getTotalSupply",value:(te=(0,a.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0});case 2:return r=e.sent,e.abrupt("return",r.value.total);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return te.apply(this,arguments)})},{key:"getInflationGovernor",value:(ee=(0,a.Z)(d().mark((function e(t){var r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getInflationGovernor",r);case 3:if(n=e.sent,!("error"in(i=(0,_.Ue)(n,yn)))){e.next=7;break}throw new Error("failed to get inflation: "+i.error.message);case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return ee.apply(this,arguments)})},{key:"getInflationReward",value:($=(0,a.Z)(d().mark((function e(t,r,n){var i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._buildArgs([t.map((function(e){return e.toBase58()}))],n,void 0,{epoch:r}),e.next=3,this._rpcRequest("getInflationReward",i);case 3:if(s=e.sent,!("error"in(o=(0,_.Ue)(s,un)))){e.next=7;break}throw new Error("failed to get inflation reward: "+o.error.message);case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return $.apply(this,arguments)})},{key:"getEpochInfo",value:(Q=(0,a.Z)(d().mark((function e(t){var r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getEpochInfo",r);case 3:if(n=e.sent,!("error"in(i=(0,_.Ue)(n,kn)))){e.next=7;break}throw new Error("failed to get epoch info: "+i.error.message);case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return Q.apply(this,arguments)})},{key:"getEpochSchedule",value:(J=(0,a.Z)(d().mark((function e(){var t,r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getEpochSchedule",[]);case 2:if(t=e.sent,!("error"in(r=(0,_.Ue)(t,mn)))){e.next=6;break}throw new Error("failed to get epoch schedule: "+r.error.message);case 6:return n=r.result,e.abrupt("return",new Hr(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot));case 8:case"end":return e.stop()}}),e,this)}))),function(){return J.apply(this,arguments)})},{key:"getLeaderSchedule",value:(Y=(0,a.Z)(d().mark((function e(){var t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getLeaderSchedule",[]);case 2:if(t=e.sent,!("error"in(r=(0,_.Ue)(t,vn)))){e.next=6;break}throw new Error("failed to get leader schedule: "+r.error.message);case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)}))),function(){return Y.apply(this,arguments)})},{key:"getMinimumBalanceForRentExemption",value:(V=(0,a.Z)(d().mark((function e(t,r){var n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t],r),e.next=3,this._rpcRequest("getMinimumBalanceForRentExemption",n);case 3:if(i=e.sent,!("error"in(s=(0,_.Ue)(i,Qn)))){e.next=8;break}return console.warn("Unable to fetch minimum balance for rent exemption"),e.abrupt("return",0);case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return V.apply(this,arguments)})},{key:"getRecentBlockhashAndContext",value:(H=(0,a.Z)(d().mark((function e(t){var r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getRecentBlockhash",r);case 3:if(n=e.sent,!("error"in(i=(0,_.Ue)(n,fi)))){e.next=7;break}throw new Error("failed to get recent blockhash: "+i.error.message);case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return H.apply(this,arguments)})},{key:"getRecentPerformanceSamples",value:(X=(0,a.Z)(d().mark((function e(t){var r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs(t?[t]:[]),e.next=3,this._rpcRequest("getRecentPerformanceSamples",r);case 3:if(n=e.sent,!("error"in(i=(0,_.Ue)(n,gi)))){e.next=7;break}throw new Error("failed to get recent performance samples: "+i.error.message);case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return X.apply(this,arguments)})},{key:"getFeeCalculatorForBlockhash",value:(F=(0,a.Z)(d().mark((function e(t,r){var n,i,s,o,a,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t],r),e.next=3,this._rpcRequest("getFeeCalculatorForBlockhash",n);case 3:if(i=e.sent,!("error"in(s=(0,_.Ue)(i,bi)))){e.next=7;break}throw new Error("failed to get fee calculator: "+s.error.message);case 7:return o=s.result,a=o.context,u=o.value,e.abrupt("return",{context:a,value:null!==u?u.feeCalculator:null});case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return F.apply(this,arguments)})},{key:"getRecentBlockhash",value:(G=(0,a.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getRecentBlockhashAndContext(t);case 3:return r=e.sent,e.abrupt("return",r.value);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("failed to get recent blockhash: "+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return G.apply(this,arguments)})},{key:"getVersion",value:(M=(0,a.Z)(d().mark((function e(){var t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getVersion",[]);case 2:if(t=e.sent,!("error"in(r=(0,_.Ue)(t,nn(gn))))){e.next=6;break}throw new Error("failed to get version: "+r.error.message);case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)}))),function(){return M.apply(this,arguments)})},{key:"getGenesisHash",value:(q=(0,a.Z)(d().mark((function e(){var t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getGenesisHash",[]);case 2:if(t=e.sent,!("error"in(r=(0,_.Ue)(t,nn((0,_.Z_)()))))){e.next=6;break}throw new Error("failed to get genesis hash: "+r.error.message);case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)}))),function(){return q.apply(this,arguments)})},{key:"getBlock",value:(D=(0,a.Z)(d().mark((function e(t,r){var n,i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r&&r.commitment),e.next=3,this._rpcRequest("getConfirmedBlock",n);case 3:if(i=e.sent,!("error"in(s=(0,_.Ue)(i,ci)))){e.next=7;break}throw new Error("failed to get confirmed block: "+s.error.message);case 7:if(o=s.result){e.next=10;break}return e.abrupt("return",o);case 10:return e.abrupt("return",U(U({},o),{},{transactions:o.transactions.map((function(e){var t=e.transaction,r=e.meta,n=new yr(t.message);return{meta:r,transaction:U(U({},t),{},{message:n})}}))}));case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return D.apply(this,arguments)})},{key:"getTransaction",value:(j=(0,a.Z)(d().mark((function e(t,r){var n,i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r&&r.commitment),e.next=3,this._rpcRequest("getConfirmedTransaction",n);case 3:if(i=e.sent,!("error"in(s=(0,_.Ue)(i,li)))){e.next=7;break}throw new Error("failed to get confirmed transaction: "+s.error.message);case 7:if(o=s.result){e.next=10;break}return e.abrupt("return",o);case 10:return e.abrupt("return",U(U({},o),{},{transaction:U(U({},o.transaction),{},{message:new yr(o.transaction.message)})}));case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return j.apply(this,arguments)})},{key:"getConfirmedBlock",value:(K=(0,a.Z)(d().mark((function e(t,r){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBlock(t,{commitment:r});case 2:if(n=e.sent){e.next=5;break}throw new Error("Confirmed block "+t+" not found");case 5:return e.abrupt("return",U(U({},n),{},{transactions:n.transactions.map((function(e){var t=e.transaction;return{meta:e.meta,transaction:Sr.populate(t.message,t.signatures)}}))}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return K.apply(this,arguments)})},{key:"getBlocks",value:(L=(0,a.Z)(d().mark((function e(t,r,n){var i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._buildArgsAtLeastConfirmed(void 0!==r?[t,r]:[t],n),e.next=3,this._rpcRequest("getConfirmedBlocks",i);case 3:if(s=e.sent,!("error"in(o=(0,_.Ue)(s,nn((0,_.IX)((0,_.Rx)())))))){e.next=7;break}throw new Error("failed to get blocks: "+o.error.message);case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return L.apply(this,arguments)})},{key:"getConfirmedBlockSignatures",value:(z=(0,a.Z)(d().mark((function e(t,r){var n,i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r,void 0,{transactionDetails:"signatures",rewards:!1}),e.next=3,this._rpcRequest("getConfirmedBlock",n);case 3:if(i=e.sent,!("error"in(s=(0,_.Ue)(i,hi)))){e.next=7;break}throw new Error("failed to get confirmed block: "+s.error.message);case 7:if(o=s.result){e.next=10;break}throw new Error("Confirmed block "+t+" not found");case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return z.apply(this,arguments)})},{key:"getConfirmedTransaction",value:(Z=(0,a.Z)(d().mark((function e(t,r){var n,i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getTransaction(t,{commitment:r});case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",n);case 5:return i=n.transaction,s=i.message,o=i.signatures,e.abrupt("return",U(U({},n),{},{transaction:Sr.populate(s,o)}));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return Z.apply(this,arguments)})},{key:"getParsedConfirmedTransaction",value:(B=(0,a.Z)(d().mark((function e(t,r){var n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed"),e.next=3,this._rpcRequest("getConfirmedTransaction",n);case 3:if(i=e.sent,!("error"in(s=(0,_.Ue)(i,pi)))){e.next=7;break}throw new Error("failed to get confirmed transaction: "+s.error.message);case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return B.apply(this,arguments)})},{key:"getParsedConfirmedTransactions",value:(W=(0,a.Z)(d().mark((function e(t,r){var n,i,s,o=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return{methodName:"getConfirmedTransaction",args:o._buildArgsAtLeastConfirmed([e],r,"jsonParsed")}})),e.next=3,this._rpcBatchRequest(n);case 3:return i=e.sent,s=i.map((function(e){var t=(0,_.Ue)(e,pi);if("error"in t)throw new Error("failed to get confirmed transactions: "+t.error.message);return t.result})),e.abrupt("return",s);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return W.apply(this,arguments)})},{key:"getConfirmedSignaturesForAddress",value:(O=(0,a.Z)(d().mark((function e(t,r,n){var i,s,o,a,u,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={},e.next=3,this.getFirstAvailableBlock();case 3:s=e.sent;case 4:if("until"in i){e.next=24;break}if(!(--r<=0||r<s)){e.next=8;break}return e.abrupt("break",24);case 8:return e.prev=8,e.next=11,this.getConfirmedBlockSignatures(r,"finalized");case 11:(o=e.sent).signatures.length>0&&(i.until=o.signatures[o.signatures.length-1].toString()),e.next=22;break;case 15:if(e.prev=15,e.t0=e.catch(8),!(e.t0 instanceof Error&&e.t0.message.includes("skipped"))){e.next=21;break}return e.abrupt("continue",4);case 21:throw e.t0;case 22:e.next=4;break;case 24:return e.next=26,this.getSlot("finalized");case 26:a=e.sent;case 27:if("before"in i){e.next=47;break}if(!(++n>a)){e.next=31;break}return e.abrupt("break",47);case 31:return e.prev=31,e.next=34,this.getConfirmedBlockSignatures(n);case 34:(u=e.sent).signatures.length>0&&(i.before=u.signatures[u.signatures.length-1].toString()),e.next=45;break;case 38:if(e.prev=38,e.t1=e.catch(31),!(e.t1 instanceof Error&&e.t1.message.includes("skipped"))){e.next=44;break}return e.abrupt("continue",27);case 44:throw e.t1;case 45:e.next=27;break;case 47:return e.next=49,this.getConfirmedSignaturesForAddress2(t,i);case 49:return c=e.sent,e.abrupt("return",c.map((function(e){return e.signature})));case 51:case"end":return e.stop()}}),e,this,[[8,15],[31,38]])}))),function(e,t,r){return O.apply(this,arguments)})},{key:"getConfirmedSignaturesForAddress2",value:(T=(0,a.Z)(d().mark((function e(t,r,n){var i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,r),e.next=3,this._rpcRequest("getConfirmedSignaturesForAddress2",i);case 3:if(s=e.sent,!("error"in(o=(0,_.Ue)(s,Un)))){e.next=7;break}throw new Error("failed to get confirmed signatures for address: "+o.error.message);case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return T.apply(this,arguments)})},{key:"getSignaturesForAddress",value:(R=(0,a.Z)(d().mark((function e(t,r,n){var i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,r),e.next=3,this._rpcRequest("getSignaturesForAddress",i);case 3:if(s=e.sent,!("error"in(o=(0,_.Ue)(s,Zn)))){e.next=7;break}throw new Error("failed to get signatures for address: "+o.error.message);case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return R.apply(this,arguments)})},{key:"getNonceAndContext",value:(P=(0,a.Z)(d().mark((function e(t,r){var n,i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAccountInfoAndContext(t,r);case 2:return n=e.sent,i=n.context,s=n.value,o=null,null!==s&&(o=Nr.fromAccountData(s.data)),e.abrupt("return",{context:i,value:o});case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return P.apply(this,arguments)})},{key:"getNonce",value:(A=(0,a.Z)(d().mark((function e(t,r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNonceAndContext(t,r).then((function(e){return e.value})).catch((function(e){throw new Error("failed to get nonce for account "+t.toBase58()+": "+e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return A.apply(this,arguments)})},{key:"requestAirdrop",value:(x=(0,a.Z)(d().mark((function e(t,r){var n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("requestAirdrop",[t.toBase58(),r]);case 2:if(n=e.sent,!("error"in(i=(0,_.Ue)(n,yi)))){e.next=6;break}throw new Error("airdrop to "+t.toBase58()+" failed: "+i.error.message);case 6:return e.abrupt("return",i.result);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return x.apply(this,arguments)})},{key:"_recentBlockhash",value:(S=(0,a.Z)(d().mark((function e(t){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=10;break}case 1:if(!this._pollingBlockhash){e.next=6;break}return e.next=4,Or(100);case 4:e.next=1;break;case 6:if(r=Date.now()-this._blockhashInfo.lastFetch,n=r>=en,null===this._blockhashInfo.recentBlockhash||n){e.next=10;break}return e.abrupt("return",this._blockhashInfo.recentBlockhash);case 10:return e.next=12,this._pollNewBlockhash();case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return S.apply(this,arguments)})},{key:"_pollNewBlockhash",value:(v=(0,a.Z)(d().mark((function e(){var t,r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._pollingBlockhash=!0,e.prev=1,t=Date.now(),r=0;case 4:if(!(r<50)){e.next=17;break}return e.next=7,this.getRecentBlockhash("finalized");case 7:if(n=e.sent,i=n.blockhash,this._blockhashInfo.recentBlockhash==i){e.next=12;break}return this._blockhashInfo={recentBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},e.abrupt("return",i);case 12:return e.next=14,Or(200);case 14:r++,e.next=4;break;case 17:throw new Error("Unable to obtain a new blockhash after ".concat(Date.now()-t,"ms"));case 18:return e.prev=18,this._pollingBlockhash=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[1,,18,21]])}))),function(){return v.apply(this,arguments)})},{key:"simulateTransaction",value:(m=(0,a.Z)(d().mark((function e(t,r,n){var i,s,a,u,c,h,l,p,f,g,b,y,k,m,v,w,S;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=t instanceof Sr?t:Sr.populate(t)).nonceInfo||!r){e.next=5;break}(s=i).sign.apply(s,(0,o.Z)(r)),e.next=23;break;case 5:a=this._disableBlockhashCaching;case 6:return e.next=8,this._recentBlockhash(a);case 8:if(i.recentBlockhash=e.sent,r){e.next=11;break}return e.abrupt("break",23);case 11:if((u=i).sign.apply(u,(0,o.Z)(r)),i.signature){e.next=14;break}throw new Error("!signature");case 14:if(c=i.signature.toString("base64"),this._blockhashInfo.simulatedSignatures.includes(c)||this._blockhashInfo.transactionSignatures.includes(c)){e.next=20;break}return this._blockhashInfo.simulatedSignatures.push(c),e.abrupt("break",23);case 20:a=!0;case 21:e.next=6;break;case 23:return h=i._compile(),l=h.serialize(),p=i._serialize(l),f=p.toString("base64"),g={encoding:"base64",commitment:this.commitment},n&&(b=(Array.isArray(n)?n:h.nonProgramIds()).map((function(e){return e.toBase58()})),g.accounts={encoding:"base64",addresses:b}),r&&(g.sigVerify=!0),y=[f,g],e.next=33,this._rpcRequest("simulateTransaction",y);case 33:if(k=e.sent,!("error"in(m=(0,_.Ue)(k,bn)))){e.next=38;break}throw"data"in m.error&&(v=m.error.data.logs)&&Array.isArray(v)&&(S=(w="\n    ")+v.join(w),console.error(m.error.message,S)),new Vr("failed to simulate transaction: "+m.error.message,v);case 38:return e.abrupt("return",m.result);case 39:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return m.apply(this,arguments)})},{key:"sendTransaction",value:(k=(0,a.Z)(d().mark((function e(t,r,n){var i,s,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.nonceInfo){e.next=4;break}t.sign.apply(t,(0,o.Z)(r)),e.next=20;break;case 4:i=this._disableBlockhashCaching;case 5:return e.next=7,this._recentBlockhash(i);case 7:if(t.recentBlockhash=e.sent,t.sign.apply(t,(0,o.Z)(r)),t.signature){e.next=11;break}throw new Error("!signature");case 11:if(s=t.signature.toString("base64"),this._blockhashInfo.transactionSignatures.includes(s)){e.next=17;break}return this._blockhashInfo.transactionSignatures.push(s),e.abrupt("break",20);case 17:i=!0;case 18:e.next=5;break;case 20:return a=t.serialize(),e.next=23,this.sendRawTransaction(a,n);case 23:return e.abrupt("return",e.sent);case 24:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return k.apply(this,arguments)})},{key:"sendRawTransaction",value:(y=(0,a.Z)(d().mark((function e(t,r){var n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(t).toString("base64"),e.next=3,this.sendEncodedTransaction(n,r);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return y.apply(this,arguments)})},{key:"sendEncodedTransaction",value:(b=(0,a.Z)(d().mark((function e(t,r){var n,i,s,o,a,u,c,h,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={encoding:"base64"},i=r&&r.skipPreflight,s=r&&r.preflightCommitment||this.commitment,i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s),o=[t,n],e.next=8,this._rpcRequest("sendTransaction",o);case 8:if(a=e.sent,!("error"in(u=(0,_.Ue)(a,ki)))){e.next=13;break}throw"data"in u.error&&(c=u.error.data.logs)&&Array.isArray(c)&&(l=(h="\n    ")+c.join(h),console.error(u.error.message,l)),new Vr("failed to send transaction: "+u.error.message,c);case 13:return e.abrupt("return",u.result);case 14:case"end":return e.stop()}}),e,this)}))),function(e,t){return b.apply(this,arguments)})},{key:"_wsOnOpen",value:function(){var e=this;this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval((function(){e._rpcWebSocket.notify("ping").catch((function(){}))}),5e3),this._updateSubscriptions()}},{key:"_wsOnError",value:function(e){console.error("ws error:",e.message)}},{key:"_wsOnClose",value:function(e){this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==e?this._resetSubscriptions():this._updateSubscriptions()}},{key:"_subscribe",value:(g=(0,a.Z)(d().mark((function e(t,r,n){var i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.subscriptionId){e.next=13;break}return t.subscriptionId="subscribing",e.prev=2,e.next=5,this._rpcWebSocket.call(r,n);case 5:"number"==typeof(i=e.sent)&&"subscribing"===t.subscriptionId&&(t.subscriptionId=i),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),"subscribing"===t.subscriptionId&&(t.subscriptionId=null),e.t0 instanceof Error&&console.error("".concat(r," error for argument"),n,e.t0.message);case 13:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e,t,r){return g.apply(this,arguments)})},{key:"_unsubscribe",value:(f=(0,a.Z)(d().mark((function e(t,r){var n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(n=t.subscriptionId)||"string"==typeof n){e.next=11;break}return i=n,e.prev=3,e.next=6,this._rpcWebSocket.call(r,[i]);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),e.t0 instanceof Error&&console.error("".concat(r," error:"),e.t0.message);case 11:case"end":return e.stop()}}),e,this,[[3,8]])}))),function(e,t){return f.apply(this,arguments)})},{key:"_resetSubscriptions",value:function(){Object.values(this._accountChangeSubscriptions).forEach((function(e){return e.subscriptionId=null})),Object.values(this._programAccountChangeSubscriptions).forEach((function(e){return e.subscriptionId=null})),Object.values(this._rootSubscriptions).forEach((function(e){return e.subscriptionId=null})),Object.values(this._signatureSubscriptions).forEach((function(e){return e.subscriptionId=null})),Object.values(this._slotSubscriptions).forEach((function(e){return e.subscriptionId=null})),Object.values(this._slotUpdateSubscriptions).forEach((function(e){return e.subscriptionId=null}))}},{key:"_updateSubscriptions",value:function(){var e=this,t=Object.keys(this._accountChangeSubscriptions).map(Number),r=Object.keys(this._programAccountChangeSubscriptions).map(Number),n=Object.keys(this._slotSubscriptions).map(Number),i=Object.keys(this._slotUpdateSubscriptions).map(Number),s=Object.keys(this._signatureSubscriptions).map(Number),o=Object.keys(this._rootSubscriptions).map(Number),a=Object.keys(this._logsSubscriptions).map(Number);if(0!==t.length||0!==r.length||0!==n.length||0!==i.length||0!==s.length||0!==o.length||0!==a.length)if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),this._rpcWebSocketConnected){var u,c=C(t);try{for(c.s();!(u=c.n()).done;){var h=u.value,l=this._accountChangeSubscriptions[h];this._subscribe(l,"accountSubscribe",this._buildArgs([l.publicKey],l.commitment,"base64"))}}catch(L){c.e(L)}finally{c.f()}var p,f=C(r);try{for(f.s();!(p=f.n()).done;){var d=p.value,g=this._programAccountChangeSubscriptions[d];this._subscribe(g,"programSubscribe",this._buildArgs([g.programId],g.commitment,"base64",{filters:g.filters}))}}catch(L){f.e(L)}finally{f.f()}var b,y=C(n);try{for(y.s();!(b=y.n()).done;){var k=b.value,m=this._slotSubscriptions[k];this._subscribe(m,"slotSubscribe",[])}}catch(L){y.e(L)}finally{y.f()}var v,w=C(i);try{for(w.s();!(v=w.n()).done;){var S=v.value,x=this._slotUpdateSubscriptions[S];this._subscribe(x,"slotsUpdatesSubscribe",[])}}catch(L){w.e(L)}finally{w.f()}var _,I=C(s);try{for(I.s();!(_=I.n()).done;){var A=_.value,E=this._signatureSubscriptions[A],P=[E.signature];E.options&&P.push(E.options),this._subscribe(E,"signatureSubscribe",P)}}catch(L){I.e(L)}finally{I.f()}var R,T=C(o);try{for(T.s();!(R=T.n()).done;){var O=R.value,W=this._rootSubscriptions[O];this._subscribe(W,"rootSubscribe",[])}}catch(L){T.e(L)}finally{T.f()}var B,U=C(a);try{for(U.s();!(B=U.n()).done;){var Z=B.value,N=this._logsSubscriptions[Z],z=void 0;z="object"==typeof N.filter?{mentions:[N.filter.toString()]}:N.filter,this._subscribe(N,"logsSubscribe",this._buildArgs([z],N.commitment))}}catch(L){U.e(L)}finally{U.f()}}else this._rpcWebSocket.connect();else this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout((function(){e._rpcWebSocketIdleTimeout=null,e._rpcWebSocket.close()}),500))}},{key:"_wsOnAccountNotification",value:function(e){for(var t=(0,_.Ue)(e,Nn),r=0,n=Object.values(this._accountChangeSubscriptions);r<n.length;r++){var i=n[r];if(i.subscriptionId===t.subscription)return void i.callback(t.result.value,t.result.context)}}},{key:"onAccountChange",value:function(e,t,r){var n=++this._accountChangeSubscriptionCounter;return this._accountChangeSubscriptions[n]={publicKey:e.toBase58(),callback:t,commitment:r,subscriptionId:null},this._updateSubscriptions(),n}},{key:"removeAccountChangeListener",value:(h=(0,a.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._accountChangeSubscriptions[t]){e.next=8;break}return r=this._accountChangeSubscriptions[t],delete this._accountChangeSubscriptions[t],e.next=5,this._unsubscribe(r,"accountUnsubscribe");case 5:this._updateSubscriptions(),e.next=9;break;case 8:throw new Error("Unknown account change id: ".concat(t));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"_wsOnProgramAccountNotification",value:function(e){for(var t=(0,_.Ue)(e,Ln),r=0,n=Object.values(this._programAccountChangeSubscriptions);r<n.length;r++){var i=n[r];if(i.subscriptionId===t.subscription){var s=t.result,o=s.value,a=s.context;return void i.callback({accountId:o.pubkey,accountInfo:o.account},a)}}}},{key:"onProgramAccountChange",value:function(e,t,r,n){var i=++this._programAccountChangeSubscriptionCounter;return this._programAccountChangeSubscriptions[i]={programId:e.toBase58(),callback:t,commitment:r,subscriptionId:null,filters:n},this._updateSubscriptions(),i}},{key:"removeProgramAccountChangeListener",value:(c=(0,a.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._programAccountChangeSubscriptions[t]){e.next=8;break}return r=this._programAccountChangeSubscriptions[t],delete this._programAccountChangeSubscriptions[t],e.next=5,this._unsubscribe(r,"programUnsubscribe");case 5:this._updateSubscriptions(),e.next=9;break;case 8:throw new Error("Unknown program account change id: ".concat(t));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"onLogs",value:function(e,t,r){var n=++this._logsSubscriptionCounter;return this._logsSubscriptions[n]={filter:e,callback:t,commitment:r,subscriptionId:null},this._updateSubscriptions(),n}},{key:"removeOnLogsListener",value:(u=(0,a.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._logsSubscriptions[t]){e.next=2;break}throw new Error("Unknown logs id: ".concat(t));case 2:return r=this._logsSubscriptions[t],delete this._logsSubscriptions[t],e.next=6,this._unsubscribe(r,"logsUnsubscribe");case 6:this._updateSubscriptions();case 7:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"_wsOnLogsNotification",value:function(e){var t,r=(0,_.Ue)(e,vi),n=C(Object.keys(this._logsSubscriptions).map(Number));try{for(n.s();!(t=n.n()).done;){var i=t.value,s=this._logsSubscriptions[i];if(s.subscriptionId===r.subscription)return void s.callback(r.result.value,r.result.context)}}catch(o){n.e(o)}finally{n.f()}}},{key:"_wsOnSlotNotification",value:function(e){for(var t=(0,_.Ue)(e,jn),r=0,n=Object.values(this._slotSubscriptions);r<n.length;r++){var i=n[r];if(i.subscriptionId===t.subscription)return void i.callback(t.result)}}},{key:"onSlotChange",value:function(e){var t=++this._slotSubscriptionCounter;return this._slotSubscriptions[t]={callback:e,subscriptionId:null},this._updateSubscriptions(),t}},{key:"removeSlotChangeListener",value:(s=(0,a.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._slotSubscriptions[t]){e.next=8;break}return r=this._slotSubscriptions[t],delete this._slotSubscriptions[t],e.next=5,this._unsubscribe(r,"slotUnsubscribe");case 5:this._updateSubscriptions(),e.next=9;break;case 8:throw new Error("Unknown slot change id: ".concat(t));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"_wsOnSlotUpdatesNotification",value:function(e){for(var t=(0,_.Ue)(e,qn),r=0,n=Object.values(this._slotUpdateSubscriptions);r<n.length;r++){var i=n[r];if(i.subscriptionId===t.subscription)return void i.callback(t.result)}}},{key:"onSlotUpdate",value:function(e){var t=++this._slotUpdateSubscriptionCounter;return this._slotUpdateSubscriptions[t]={callback:e,subscriptionId:null},this._updateSubscriptions(),t}},{key:"removeSlotUpdateListener",value:(n=(0,a.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._slotUpdateSubscriptions[t]){e.next=8;break}return r=this._slotUpdateSubscriptions[t],delete this._slotUpdateSubscriptions[t],e.next=5,this._unsubscribe(r,"slotsUpdatesUnsubscribe");case 5:this._updateSubscriptions(),e.next=9;break;case 8:throw new Error("Unknown slot update id: ".concat(t));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_buildArgs",value:function(e,t,r,n){var i=t||this._commitment;if(i||r||n){var s={};r&&(s.encoding=r),i&&(s.commitment=i),n&&(s=Object.assign(s,n)),e.push(s)}return e}},{key:"_buildArgsAtLeastConfirmed",value:function(e,t,r,n){var i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,n)}},{key:"_wsOnSignatureNotification",value:function(e){for(var t=(0,_.Ue)(e,Mn),r=0,n=Object.entries(this._signatureSubscriptions);r<n.length;r++){var s=(0,i.Z)(n[r],2),o=s[0],a=s[1];if(a.subscriptionId===t.subscription)return void("receivedSignature"===t.result.value?a.callback({type:"received"},t.result.context):(delete this._signatureSubscriptions[Number(o)],this._updateSubscriptions(),a.callback({type:"status",result:t.result.value},t.result.context)))}}},{key:"onSignature",value:function(e,t,r){var n=++this._signatureSubscriptionCounter;return this._signatureSubscriptions[n]={signature:e,callback:function(e,r){"status"===e.type&&t(e.result,r)},options:{commitment:r},subscriptionId:null},this._updateSubscriptions(),n}},{key:"onSignatureWithOptions",value:function(e,t,r){var n=++this._signatureSubscriptionCounter;return this._signatureSubscriptions[n]={signature:e,callback:t,options:r,subscriptionId:null},this._updateSubscriptions(),n}},{key:"removeSignatureListener",value:(r=(0,a.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._signatureSubscriptions[t]){e.next=8;break}return r=this._signatureSubscriptions[t],delete this._signatureSubscriptions[t],e.next=5,this._unsubscribe(r,"signatureUnsubscribe");case 5:this._updateSubscriptions(),e.next=9;break;case 8:throw new Error("Unknown signature result id: ".concat(t));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_wsOnRootNotification",value:function(e){for(var t=(0,_.Ue)(e,Gn),r=0,n=Object.values(this._rootSubscriptions);r<n.length;r++){var i=n[r];if(i.subscriptionId===t.subscription)return void i.callback(t.result)}}},{key:"onRootChange",value:function(e){var t=++this._rootSubscriptionCounter;return this._rootSubscriptions[t]={callback:e,subscriptionId:null},this._updateSubscriptions(),t}},{key:"removeRootChangeListener",value:(t=(0,a.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._rootSubscriptions[t]){e.next=8;break}return r=this._rootSubscriptions[t],delete this._rootSubscriptions[t],e.next=5,this._unsubscribe(r,"rootUnsubscribe");case 5:this._updateSubscriptions(),e.next=9;break;case 8:throw new Error("Unknown root change id: ".concat(t));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),Si=function(){function e(t){(0,l.Z)(this,e),this._keypair=void 0,this._keypair=t||b().sign.keyPair()}return(0,p.Z)(e,[{key:"publicKey",get:function(){return new sr(this._keypair.publicKey)}},{key:"secretKey",get:function(){return this._keypair.secretKey}}],[{key:"generate",value:function(){return new e(b().sign.keyPair())}},{key:"fromSecretKey",value:function(t,r){var n=b().sign.keyPair.fromSecretKey(t);if(!r||!r.skipValidation){var i=(new TextEncoder).encode("@solana/web3.js-validation-v1"),s=b().sign.detached(i,n.secretKey);if(!b().sign.detached.verify(i,s,n.publicKey))throw new Error("provided secretKey is invalid")}return new e(n)}},{key:"fromSeed",value:function(t){return new e(b().sign.keyPair.fromSeed(t))}}]),e}(),xi=x.struct([x.u8("numSignatures"),x.u8("padding"),x.u16("signatureOffset"),x.u16("signatureInstructionIndex"),x.u16("publicKeyOffset"),x.u16("publicKeyInstructionIndex"),x.u16("messageDataOffset"),x.u16("messageDataSize"),x.u16("messageInstructionIndex")]),_i=function(){function e(){(0,l.Z)(this,e)}return(0,p.Z)(e,null,[{key:"createInstructionWithPublicKey",value:function(t){var r=t.publicKey,n=t.message,i=t.signature,s=t.instructionIndex;kr(32===r.length,"Public Key must be ".concat(32," bytes but received ").concat(r.length," bytes")),kr(64===i.length,"Signature must be ".concat(64," bytes but received ").concat(i.length," bytes"));var o=xi.span,a=o+r.length,u=a+i.length,c=y.lW.alloc(u+n.length);return xi.encode({numSignatures:1,padding:0,signatureOffset:a,signatureInstructionIndex:s,publicKeyOffset:o,publicKeyInstructionIndex:s,messageDataOffset:u,messageDataSize:n.length,messageInstructionIndex:s},c),c.fill(r,o),c.fill(i,a),c.fill(n,u),new wr({keys:[],programId:e.programId,data:c})}},{key:"createInstructionWithPrivateKey",value:function(e){var t=e.privateKey,r=e.message,n=e.instructionIndex;kr(64===t.length,"Private key must be ".concat(64," bytes but received ").concat(t.length," bytes"));try{var i=Si.fromSecretKey(t),s=i.publicKey.toBytes(),o=b().sign.detached(r,i.secretKey);return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:o,instructionIndex:n})}catch(a){throw new Error("Error creating instruction; ".concat(a))}}}]),e}();_i.programId=new sr("Ed25519SigVerify111111111111111111111111111");var Ii=new sr("StakeConfig11111111111111111111111111111111"),Ai=function e(t,r){(0,l.Z)(this,e),this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=r},Ei=function e(t,r,n){(0,l.Z)(this,e),this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=r,this.custodian=n};Ei.default=new Ei(0,0,sr.default);var Pi=function(){function e(){(0,l.Z)(this,e)}return(0,p.Z)(e,null,[{key:"decodeInstructionType",value:function(e){this.checkProgramId(e.programId);for(var t,r=x.u32("instruction").decode(e.data),n=0,s=Object.entries(Ri);n<s.length;n++){var o=(0,i.Z)(s[n],2),a=o[0];if(o[1].index==r){t=a;break}}if(!t)throw new Error("Instruction type incorrect; not a StakeInstruction");return t}},{key:"decodeInitialize",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=Wr(Ri.Initialize,e.data),r=t.authorized,n=t.lockup;return{stakePubkey:e.keys[0].pubkey,authorized:new Ai(new sr(r.staker),new sr(r.withdrawer)),lockup:new Ei(n.unixTimestamp,n.epoch,new sr(n.custodian))}}},{key:"decodeDelegate",value:function(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),Wr(Ri.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}},{key:"decodeAuthorize",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=Wr(Ri.Authorize,e.data),r=t.newAuthorized,n=t.stakeAuthorizationType,i={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new sr(r),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}},{key:"decodeAuthorizeWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=Wr(Ri.AuthorizeWithSeed,e.data),r=t.newAuthorized,n=t.stakeAuthorizationType,i=t.authoritySeed,s=t.authorityOwner,o={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:i,authorityOwner:new sr(s),newAuthorizedPubkey:new sr(r),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(o.custodianPubkey=e.keys[3].pubkey),o}},{key:"decodeSplit",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=Wr(Ri.Split,e.data).lamports;return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}},{key:"decodeMerge",value:function(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Wr(Ri.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}},{key:"decodeWithdraw",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);var t=Wr(Ri.Withdraw,e.data).lamports,r={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(r.custodianPubkey=e.keys[5].pubkey),r}},{key:"decodeDeactivate",value:function(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Wr(Ri.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}},{key:"checkProgramId",value:function(e){if(!e.equals(Oi.programId))throw new Error("invalid instruction; programId is not StakeProgram")}},{key:"checkKeyLength",value:function(e,t){if(e.length<t)throw new Error("invalid instruction; found ".concat(e.length," keys, expected at least ").concat(t))}}]),e}(),Ri=Object.freeze({Initialize:{index:0,layout:x.struct([x.u32("instruction"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"authorized";return x.struct([fr("staker"),fr("withdrawer")],e)}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"lockup";return x.struct([x.ns64("unixTimestamp"),x.ns64("epoch"),fr("custodian")],e)}()])},Authorize:{index:1,layout:x.struct([x.u32("instruction"),fr("newAuthorized"),x.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:x.struct([x.u32("instruction")])},Split:{index:3,layout:x.struct([x.u32("instruction"),x.ns64("lamports")])},Withdraw:{index:4,layout:x.struct([x.u32("instruction"),x.ns64("lamports")])},Deactivate:{index:5,layout:x.struct([x.u32("instruction")])},Merge:{index:7,layout:x.struct([x.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:x.struct([x.u32("instruction"),fr("newAuthorized"),x.u32("stakeAuthorizationType"),dr("authoritySeed"),fr("authorityOwner")])}}),Ti=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),Oi=function(){function e(){(0,l.Z)(this,e)}return(0,p.Z)(e,null,[{key:"initialize",value:function(e){var t=e.stakePubkey,r=e.authorized,n=e.lockup||Ei.default,i=Cr(Ri.Initialize,{authorized:{staker:N(r.staker.toBuffer()),withdrawer:N(r.withdrawer.toBuffer())},lockup:{unixTimestamp:n.unixTimestamp,epoch:n.epoch,custodian:N(n.custodian.toBuffer())}}),s={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ir,isSigner:!1,isWritable:!1}],programId:this.programId,data:i};return new wr(s)}},{key:"createAccountWithSeed",value:function(e){var t=new Sr;t.add(Kr.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));var r=e.stakePubkey,n=e.authorized,i=e.lockup;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}},{key:"createAccount",value:function(e){var t=new Sr;t.add(Kr.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));var r=e.stakePubkey,n=e.authorized,i=e.lockup;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}},{key:"delegate",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.votePubkey,i=Cr(Ri.Delegate);return(new Sr).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:xr,isSigner:!1,isWritable:!1},{pubkey:Er,isSigner:!1,isWritable:!1},{pubkey:Ii,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}},{key:"authorize",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.newAuthorizedPubkey,i=e.stakeAuthorizationType,s=e.custodianPubkey,o=Cr(Ri.Authorize,{newAuthorized:N(n.toBuffer()),stakeAuthorizationType:i.index}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:xr,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&a.push({pubkey:s,isSigner:!1,isWritable:!1}),(new Sr).add({keys:a,programId:this.programId,data:o})}},{key:"authorizeWithSeed",value:function(e){var t=e.stakePubkey,r=e.authorityBase,n=e.authoritySeed,i=e.authorityOwner,s=e.newAuthorizedPubkey,o=e.stakeAuthorizationType,a=e.custodianPubkey,u=Cr(Ri.AuthorizeWithSeed,{newAuthorized:N(s.toBuffer()),stakeAuthorizationType:o.index,authoritySeed:n,authorityOwner:N(i.toBuffer())}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:xr,isSigner:!1,isWritable:!1}];return a&&c.push({pubkey:a,isSigner:!1,isWritable:!1}),(new Sr).add({keys:c,programId:this.programId,data:u})}},{key:"split",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.splitStakePubkey,i=e.lamports,s=new Sr;s.add(Kr.createAccount({fromPubkey:r,newAccountPubkey:n,lamports:0,space:this.space,programId:this.programId}));var o=Cr(Ri.Split,{lamports:i});return s.add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}},{key:"merge",value:function(e){var t=e.stakePubkey,r=e.sourceStakePubKey,n=e.authorizedPubkey,i=Cr(Ri.Merge);return(new Sr).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:xr,isSigner:!1,isWritable:!1},{pubkey:Er,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}},{key:"withdraw",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.toPubkey,i=e.lamports,s=e.custodianPubkey,o=Cr(Ri.Withdraw,{lamports:i}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:xr,isSigner:!1,isWritable:!1},{pubkey:Er,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&a.push({pubkey:s,isSigner:!1,isWritable:!1}),(new Sr).add({keys:a,programId:this.programId,data:o})}},{key:"deactivate",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=Cr(Ri.Deactivate);return(new Sr).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:xr,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}]),e}();Oi.programId=new sr("Stake11111111111111111111111111111111111111"),Oi.space=200;var Ci=R().publicKeyCreate,Wi=R().ecdsaSign,Bi=x.struct([x.u8("numSignatures"),x.u16("signatureOffset"),x.u8("signatureInstructionIndex"),x.u16("ethAddressOffset"),x.u8("ethAddressInstructionIndex"),x.u16("messageDataOffset"),x.u16("messageDataSize"),x.u8("messageInstructionIndex"),x.blob(20,"ethAddress"),x.blob(64,"signature"),x.u8("recoveryId")]),Ui=function(){function e(){(0,l.Z)(this,e)}return(0,p.Z)(e,null,[{key:"publicKeyToEthAddress",value:function(e){kr(64===e.length,"Public key must be ".concat(64," bytes but received ").concat(e.length," bytes"));try{return y.lW.from(O().keccak_256.update(N(e)).digest()).slice(-20)}catch(t){throw new Error("Error constructing Ethereum address: ".concat(t))}}},{key:"createInstructionWithPublicKey",value:function(t){var r=t.publicKey,n=t.message,i=t.signature,s=t.recoveryId,o=t.instructionIndex;return e.createInstructionWithEthAddress({ethAddress:e.publicKeyToEthAddress(r),message:n,signature:i,recoveryId:s,instructionIndex:o})}},{key:"createInstructionWithEthAddress",value:function(t){var r,n=t.ethAddress,i=t.message,s=t.signature,o=t.recoveryId,a=t.instructionIndex,u=void 0===a?0:a;kr(20===(r="string"==typeof n?n.startsWith("0x")?y.lW.from(n.substr(2),"hex"):y.lW.from(n,"hex"):n).length,"Address must be ".concat(20," bytes but received ").concat(r.length," bytes"));var c=12+r.length,h=c+s.length+1,l=y.lW.alloc(Bi.span+i.length);return Bi.encode({numSignatures:1,signatureOffset:c,signatureInstructionIndex:u,ethAddressOffset:12,ethAddressInstructionIndex:u,messageDataOffset:h,messageDataSize:i.length,messageInstructionIndex:u,signature:N(s),ethAddress:N(r),recoveryId:o},l),l.fill(N(i),Bi.span),new wr({keys:[],programId:e.programId,data:l})}},{key:"createInstructionWithPrivateKey",value:function(e){var t=e.privateKey,r=e.message,n=e.instructionIndex;kr(32===t.length,"Private key must be ".concat(32," bytes but received ").concat(t.length," bytes"));try{var i=N(t),s=Ci(i,!1).slice(1),o=y.lW.from(O().keccak_256.update(N(r)).digest()),a=Wi(o,i),u=a.signature,c=a.recid;return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:u,recoveryId:c,instructionIndex:n})}catch(h){throw new Error("Error creating instruction; ".concat(h))}}}]),e}();Ui.programId=new sr("KeccakSecp256k11111111111111111111111111111");var Zi=new sr("Va1idator1nfo111111111111111111111111111111"),Ni=(0,_.dt)({name:(0,_.Z_)(),website:(0,_.jt)((0,_.Z_)()),details:(0,_.jt)((0,_.Z_)()),keybaseUsername:(0,_.jt)((0,_.Z_)())}),zi=function(){function e(t,r){(0,l.Z)(this,e),this.key=void 0,this.info=void 0,this.key=t,this.info=r}return(0,p.Z)(e,null,[{key:"fromConfigData",value:function(t){var r=(0,o.Z)(t);if(2!==gr(r))return null;for(var n=[],i=0;i<2;i++){var s=new sr(r.slice(0,32)),a=1===(r=r.slice(32)).slice(0,1)[0];r=r.slice(1),n.push({publicKey:s,isSigner:a})}if(n[0].publicKey.equals(Zi)&&n[1].isSigner){var u=dr().decode(y.lW.from(r)),c=JSON.parse(u);return(0,_.hu)(c,Ni),new e(n[1].publicKey,c)}return null}}]),e}(),Li=new sr("Vote111111111111111111111111111111111111111"),Ki=x.struct([fr("nodePubkey"),fr("authorizedVoterPubkey"),fr("authorizedWithdrawerPubkey"),x.u8("commission"),x.nu64(),x.seq(x.struct([x.nu64("slot"),x.u32("confirmationCount")]),x.offset(x.u32(),-8),"votes"),x.u8("rootSlotValid"),x.nu64("rootSlot"),x.nu64("epoch"),x.nu64("credits"),x.nu64("lastEpochCredits"),x.nu64(),x.seq(x.struct([x.nu64("epoch"),x.nu64("credits"),x.nu64("prevCredits")]),x.offset(x.u32(),-8),"epochCredits")]),ji=function(){function e(t){(0,l.Z)(this,e),this.nodePubkey=void 0,this.authorizedVoterPubkey=void 0,this.authorizedWithdrawerPubkey=void 0,this.commission=void 0,this.votes=void 0,this.rootSlot=void 0,this.epoch=void 0,this.credits=void 0,this.lastEpochCredits=void 0,this.epochCredits=void 0,this.nodePubkey=t.nodePubkey,this.authorizedVoterPubkey=t.authorizedVoterPubkey,this.authorizedWithdrawerPubkey=t.authorizedWithdrawerPubkey,this.commission=t.commission,this.votes=t.votes,this.rootSlot=t.rootSlot,this.epoch=t.epoch,this.credits=t.credits,this.lastEpochCredits=t.lastEpochCredits,this.epochCredits=t.epochCredits}return(0,p.Z)(e,null,[{key:"fromAccountData",value:function(t){var r=Ki.decode(N(t),0),n=r.rootSlot;return r.rootSlotValid||(n=null),new e({nodePubkey:new sr(r.nodePubkey),authorizedVoterPubkey:new sr(r.authorizedVoterPubkey),authorizedWithdrawerPubkey:new sr(r.authorizedWithdrawerPubkey),commission:r.commission,votes:r.votes,rootSlot:n,epoch:r.epoch,credits:r.credits,lastEpochCredits:r.lastEpochCredits,epochCredits:r.epochCredits})}}]),e}();function Di(e,t,r){return qi.apply(this,arguments)}function qi(){return(qi=(0,a.Z)(d().mark((function e(t,r,n){var i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment},e.next=3,t.sendRawTransaction(r,i);case 3:return s=e.sent,e.next=6,t.confirmTransaction(s,n&&n.commitment);case 6:if(!(o=e.sent.value).err){e.next=9;break}throw new Error("Raw transaction ".concat(s," failed (").concat(JSON.stringify(o),")"));case 9:return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Mi={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com"}};function Gi(e,t){var r=!1===t?"http":"https";if(!e)return Mi[r].devnet;var n=Mi[r][e];if(!n)throw new Error("Unknown ".concat(r," cluster: ").concat(e));return n}var Fi=1e9}}]);
//# sourceMappingURL=8015bd09-76b26ef9a1117f0008b8.js.map